"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[336],{1336:(e,r,n)=>{n.r(r),n.d(r,{default:()=>he});var a=n(8157),o=n(881),l=n(9950),i=n(4919),t=n(3464),s=n(33),d=n(8170),c=n(3230),u=n(9925),h=n(3266),p=n(6497),g=n(7324),m=n(2053),v=n(9739),x=n(226),A=n(6639),j=n(3939),y=n(1201),b=n(9379),C=n(45),f=n(735),I=n(3038),E=n(2394),B=n(2606),F=n(4414);const S=["label","placeholder","options","value","onChange","multiple","disabled","error","helperText"],P=(0,F.jsx)(E.A,{fontSize:"small"}),T=(0,F.jsx)(B.A,{fontSize:"small"});function k(e){let{label:r="\u0627\u062e\u062a\u0631",placeholder:n="\u0627\u0628\u062d\u062b...",options:a=[],value:o,onChange:l,multiple:i=!1,disabled:t=!1,error:s,helperText:d}=e,c=(0,C.A)(e,S);return(0,F.jsx)(f.A,(0,b.A)({multiple:i,disableCloseOnSelect:i,options:a,value:o||(i?[]:null),onChange:(e,r)=>null===l||void 0===l?void 0:l(r),getOptionLabel:e=>{var r;return null!==(r=null===e||void 0===e?void 0:e.label)&&void 0!==r?r:""},renderOption:(e,r,n)=>{let{selected:a}=n;return(0,F.jsxs)("li",(0,b.A)((0,b.A)({},e),{},{children:[i&&(0,F.jsx)(I.A,{icon:P,checkedIcon:T,style:{marginRight:8},checked:a}),r.label]}))},renderInput:e=>(0,F.jsx)(u.A,(0,b.A)((0,b.A)({},e),{},{label:r,placeholder:n,error:Boolean(s),helperText:d})),filterSelectedOptions:!0,clearOnBlur:!1,autoHighlight:!0,fullWidth:!0,disabled:t},c))}var w=n(2578),q=n(5318),O=n(9714);const W=["image/jpeg","image/png","image/webp","image/jpg"],R=O.Ik({nameEn:O.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),nameAr:O.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),descriptionEn:O.Yj().max(5e3),descriptionAr:O.Yj().max(5e3),price:O.ai().typeError("\u0627\u0644\u0633\u0639\u0631 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").required("\u0627\u0644\u0633\u0639\u0631 \u0645\u0637\u0644\u0648\u0628").min(0,"\u0627\u0644\u0633\u0639\u0631 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0"),discountPrice:O.ai().typeError("\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").min(0,"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0").nullable(),colors:O.YO().of(O.Ik({id:O.gl().required(),label:O.Yj().required()})).min(1,"\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),hasDelivery:O.zM().required(),hasInstallation:O.zM().required(),isActive:O.zM().required(),isFeatured:O.zM().required(),tags:O.Yj().required("\u0639\u0644\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0637\u0644\u0648\u0628\u0629").test("not-empty-tags","\u0623\u062f\u062e\u0644 \u0648\u0633\u0645\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",(e=>(e||"").split(",").map((e=>e.trim())).filter(Boolean).length>0)),categoryId:O.ai().typeError("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628").required("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),subCategoryId:O.ai().typeError("\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629").nullable(),images:O.YO().of(O.gl().test("fileType","\u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0635\u0648\u0631\u0629",(e=>!!e&&W.includes(e.type)))).max(3,"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0635\u0648\u0631 ".concat(3)).min(1,"\u0623\u0636\u0641 \u0635\u0648\u0631\u0629 \u0648\u0627\u062d\u062f\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u0644\u0635\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0629")}),D=O.Ik({nameEn:O.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),nameAr:O.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),descriptionEn:O.Yj().max(5e3),descriptionAr:O.Yj().max(5e3),price:O.ai().typeError("\u0627\u0644\u0633\u0639\u0631 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").required("\u0627\u0644\u0633\u0639\u0631 \u0645\u0637\u0644\u0648\u0628").min(0,"\u0627\u0644\u0633\u0639\u0631 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0"),discountPrice:O.ai().typeError("\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").min(0,"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0").nullable(),colors:O.YO().of(O.Ik({id:O.gl().required(),label:O.Yj().required()})).min(1,"\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),hasDelivery:O.zM().required(),hasInstallation:O.zM().required(),isActive:O.zM().required(),isFeatured:O.zM().required(),tags:O.Yj().required("\u0639\u0644\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0637\u0644\u0648\u0628\u0629").test("not-empty-tags","\u0623\u062f\u062e\u0644 \u0648\u0633\u0645\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",(e=>(e||"").split(",").map((e=>e.trim())).filter(Boolean).length>0)),categoryId:O.ai().typeError("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628").required("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),subCategoryId:O.ai().typeError("\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629").nullable(),images:O.YO().of(O.gl().test("fileType","\u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0635\u0648\u0631\u0629",(e=>!!e&&W.includes(e.type)))).max(3,"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0635\u0648\u0631 ".concat(3))});var N=n(5441),z=n(1778),V=n(315),M=n(9385);const Y=[{scope:V.e.PRODUCTS}],L=["image/jpeg","image/png","image/webp","image/jpg"];function H(e){var r,n;let{open:a,onClose:o,product:i}=e;const{mutate:b,isPending:C}=(e=>{let{onSuccess:r,onError:n}=e;const a=(0,N.jE)();return(0,z.n)({mutationFn:e=>{let{id:r,payload:n}=e;return(0,M.vc)(r,n)},onSuccess:(e,n,o)=>{a.invalidateQueries({queryKey:Y}),null===r||void 0===r||r(e,n,o)},onError:(e,r,a)=>{null===n||void 0===n||n(e,r,a)}})})({onSuccess:()=>{y.oR.success("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),O.resetForm(),null===o||void 0===o||o()},onError:e=>{var r,n;const a=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===e||void 0===e?void 0:e.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639";y.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(a))}}),{data:f,isLoading:I}=(0,q.Yv)(),{data:E,isLoading:B}=(0,q.Ay)(),S=(0,l.useMemo)((()=>{var e;return(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.categories)||[]}),[f]),P=(0,l.useMemo)((()=>(null===E||void 0===E?void 0:E.data)||[]),[E]),T=w.VI.filter((e=>i.colors.includes(e.value))),O=(0,j.Wx)({initialValues:{nameEn:(null===i||void 0===i?void 0:i.nameEn)||"",nameAr:(null===i||void 0===i?void 0:i.nameAr)||"",descriptionEn:(null===i||void 0===i?void 0:i.descriptionEn)||"",descriptionAr:(null===i||void 0===i?void 0:i.descriptionAr)||"",price:(null===i||void 0===i?void 0:i.price)||"",discountPrice:(null===i||void 0===i?void 0:i.discountPrice)||"",colors:T.length>0?T:[],hasDelivery:(null===i||void 0===i?void 0:i.hasDelivery)||!1,hasInstallation:(null===i||void 0===i?void 0:i.hasInstallation)||!1,isActive:(null===i||void 0===i?void 0:i.isActive)||!1,isFeatured:(null===i||void 0===i?void 0:i.isFeatured)||!1,tags:(null===i||void 0===i?void 0:i.tags.join(", "))||"",categoryId:(null===i||void 0===i?void 0:i.categoryId)||"",subCategoryId:(null===i||void 0===i?void 0:i.subCategoryId)||"",images:[]},enableReinitialize:!0,validationSchema:D,validateOnBlur:!0,validateOnChange:!1,onSubmit:e=>{const r=new FormData;r.append("nameEn",e.nameEn),r.append("nameAr",e.nameAr),r.append("descriptionEn",e.descriptionEn||""),r.append("descriptionAr",e.descriptionAr||""),r.append("price",Number(e.price)),""!==e.discountPrice&&null!==e.discountPrice&&r.append("discountPrice",Number(e.discountPrice));const n=e.colors.map((e=>e.value)).join(",");r.append("colors",n),r.append("hasDelivery",String(e.hasDelivery)),r.append("hasInstallation",String(e.hasInstallation)),r.append("isActive",String(e.isActive)),r.append("isFeatured",String(e.isFeatured)),r.append("tags",e.tags),r.append("categoryId",String(e.categoryId)),e.subCategoryId&&r.append("subCategoryId",String(e.subCategoryId)),(e.images||[]).slice(0,3).forEach((e=>{r.append("images",e)})),b({payload:r,id:i.id})}}),W=()=>{O.resetForm(),null===o||void 0===o||o()},R=(0,l.useMemo)((()=>{const e=Number(O.values.categoryId||0);return e?(P||[]).filter((r=>Number(r.categoryId)===e)):[]}),[O.values.categoryId,P]);return(0,F.jsxs)(t.A,{open:a,onClose:W,fullWidth:!0,maxWidth:"md",children:[(0,F.jsx)(s.A,{children:"\u062a\u0639\u062f\u064a\u0644 \u0645\u0646\u062a\u062c "}),(0,F.jsxs)("form",{onSubmit:O.handleSubmit,encType:"multipart/form-data",children:[(0,F.jsx)(d.A,{children:(0,F.jsxs)(c.A,{spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629)",name:"nameEn",placeholder:"Office Chair",value:O.values.nameEn,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.nameEn&&O.errors.nameEn),helperText:O.touched.nameEn&&O.errors.nameEn,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629)",name:"nameAr",placeholder:"\u0643\u0631\u0633\u064a \u0645\u0643\u062a\u0628",value:O.values.nameAr,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.nameAr&&O.errors.nameAr),helperText:O.touched.nameAr&&O.errors.nameAr,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (EN)",name:"descriptionEn",placeholder:"Detailed English description",value:O.values.descriptionEn,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.descriptionEn&&O.errors.descriptionEn),helperText:O.touched.descriptionEn&&O.errors.descriptionEn,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (AR)",name:"descriptionAr",placeholder:"\u0648\u0635\u0641 \u0639\u0631\u0628\u064a \u062a\u0641\u0635\u064a\u0644\u064a",value:O.values.descriptionAr,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.descriptionAr&&O.errors.descriptionAr),helperText:O.touched.descriptionAr&&O.errors.descriptionAr,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0644\u0633\u0639\u0631 (SAR)",name:"price",type:"number",inputProps:{min:0,step:"0.01"},value:O.values.price,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.price&&O.errors.price),helperText:O.touched.price&&O.errors.price,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 (SAR)",name:"discountPrice",type:"number",inputProps:{min:0,step:"0.01"},value:O.values.discountPrice,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.discountPrice&&O.errors.discountPrice),helperText:O.touched.discountPrice&&O.errors.discountPrice,fullWidth:!0})]}),(0,F.jsx)(k,{label:"\u0627\u0644\u0623\u0644\u0648\u0627\u0646",options:w.VI||[],placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0644\u0648\u0627\u0646",name:"colors",multiple:!0,value:O.values.colors,onChange:e=>O.setFieldValue("colors",e||[]),error:O.touched.colors&&O.errors.colors,helperText:O.touched.colors&&O.errors.colors}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u062e\u0635\u0627\u0626\u0635",name:"tags",placeholder:"office, chair, ergonomic",value:O.values.tags,onChange:O.handleChange,onBlur:O.handleBlur,error:Boolean(O.touched.tags&&O.errors.tags),helperText:O.touched.tags&&O.errors.tags,fullWidth:!0}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645",name:"categoryId",value:null!==(r=O.values.categoryId)&&void 0!==r?r:"",disabled:I,onChange:e=>O.setFieldValue("categoryId",Number(e.target.value)),onBlur:O.handleBlur,error:Boolean(O.touched.categoryId&&O.errors.categoryId),helperText:O.touched.categoryId&&O.errors.categoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==S&&void 0!==S?S:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0641\u0631\u0639\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"subCategoryId",value:null!==(n=O.values.subCategoryId)&&void 0!==n?n:"",onChange:e=>{const r=e.target.value;O.setFieldValue("subCategoryId",""===r?"":Number(r))},onBlur:O.handleBlur,error:Boolean(O.touched.subCategoryId&&O.errors.subCategoryId),helperText:O.touched.subCategoryId&&O.errors.subCategoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==R&&void 0!==R?R:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsxs)(c.A,{direction:"row",spacing:3,children:[(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(O.values.hasDelivery),onChange:e=>O.setFieldValue("hasDelivery",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(O.values.hasInstallation),onChange:e=>O.setFieldValue("hasInstallation",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0631\u0643\u064a\u0628"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(O.values.isActive),onChange:e=>O.setFieldValue("isActive",e.target.checked)}),label:"\u0645\u064f\u0641\u0639\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(O.values.isFeatured),onChange:e=>O.setFieldValue("isFeatured",e.target.checked)}),label:"\u0645\u0645\u064a\u0632"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(m.A,{variant:"subtitle2",sx:{mb:.5},children:["\u0627\u0644\u0635\u0648\u0631 (\u062d\u062a\u0649 ",3,")"]}),(0,F.jsx)(u.A,{name:"images",type:"file",inputProps:{accept:L.join(","),multiple:!0},onChange:e=>{const r=Array.from(e.target.files||[]);O.setFieldValue("images",r)},error:Boolean(O.touched.images&&O.errors.images),helperText:O.touched.images&&O.errors.images,fullWidth:!0})]})]})}),(0,F.jsxs)(v.A,{children:[(0,F.jsx)(x.A,{onClick:W,disabled:C,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(x.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:C||!O.dirty,children:C?(0,F.jsx)(A.A,{size:22,sx:{color:"#000"}}):"\u062a\u0639\u062f\u064a\u0644"})]})]})]})}var U=n(7378),_=n(6491);n(2877);const K=[{scope:V.e.PRODUCTS}];function Q(e){let{open:r,onClose:n,productId:a}=e;const{mutate:o,isPending:l}=(e=>{let{onSuccess:r,onError:n}=e;const a=(0,N.jE)();return(0,z.n)({mutationFn:e=>{let{productId:r}=e;return(0,M.DD)(r)},onSuccess:(e,n,o)=>{a.invalidateQueries({queryKey:K}),null===r||void 0===r||r(e,n,o)},onError:(e,r,a)=>{null===n||void 0===n||n(e,r,a)}})})({onSuccess:()=>{y.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),n()},onError:e=>{y.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}});return(0,F.jsxs)(t.A,{open:r,onClose:n,fullWidth:!0,maxWidth:"xs",children:[(0,F.jsx)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,F.jsxs)(_.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:2,borderRadius:"50%",backgroundColor:"#FEF9F9",width:"fit-content"},children:[" ",(0,F.jsx)(i.A,{color:"error",children:"delete"})]})}),(0,F.jsx)(d.A,{sx:{textAlign:"center"},children:(0,F.jsx)(m.A,{children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c "})}),(0,F.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,F.jsx)(x.A,{onClick:n,disabled:l,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(x.A,{variant:"contained",sx:{color:"#FFF",backgroundColor:"#F75555","&:hover":{backgroundColor:"#d63f3f"},"&:focus":{outline:"none",backgroundColor:"#d63f3f"},"&:active":{backgroundColor:"#d63f3f",boxShadow:"none"}},disableElevation:!0,onClick:()=>{o({productId:a})},disabled:l,children:l?(0,F.jsx)(A.A,{size:22,sx:{color:"#000"}}):"\u062d\u0630\u0641"})," "]})]})}const $=[{scope:V.e.PRODUCTS}],G=["image/jpeg","image/png","image/webp","image/jpg"],J=R;function X(e){var r,n;let{open:a,onClose:o}=e;const{mutate:i,isPending:b}=(e=>{let{onSuccess:r,onError:n}=e;const a=(0,N.jE)();return(0,z.n)({mutationFn:e=>{let{payload:r}=e;return(0,M.Bj)(r)},onSuccess:(e,n,o)=>{a.invalidateQueries({queryKey:$}),null===r||void 0===r||r(e,n,o)},onError:(e,r,a)=>{null===n||void 0===n||n(e,r,a)}})})({onSuccess:()=>{y.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),P.resetForm(),null===o||void 0===o||o()},onError:e=>{var r,n;const a=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||(null===e||void 0===e?void 0:e.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639";y.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(a))}}),{data:C,isLoading:f}=(0,q.Yv)(),{data:I,isLoading:E}=(0,q.Ay)(),B=(0,l.useMemo)((()=>{var e;return(null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.categories)||[]}),[C]),S=(0,l.useMemo)((()=>(null===I||void 0===I?void 0:I.data)||[]),[I]),P=(0,j.Wx)({initialValues:{nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",price:"",discountPrice:"",colors:[],hasDelivery:!1,hasInstallation:!1,isActive:!0,isFeatured:!1,tags:"",categoryId:"",subCategoryId:"",images:[]},validationSchema:J,validateOnBlur:!0,validateOnChange:!1,onSubmit:e=>{const r=new FormData;r.append("nameEn",e.nameEn),r.append("nameAr",e.nameAr),r.append("descriptionEn",e.descriptionEn||""),r.append("descriptionAr",e.descriptionAr||""),r.append("price",Number(e.price)),""!==e.discountPrice&&null!==e.discountPrice&&r.append("discountPrice",Number(e.discountPrice));const n=e.colors.map((e=>e.value)).join(",");r.append("colors",n),r.append("hasDelivery",String(e.hasDelivery)),r.append("hasInstallation",String(e.hasInstallation)),r.append("isActive",String(e.isActive)),r.append("isFeatured",String(e.isFeatured)),r.append("tags",e.tags),r.append("categoryId",String(e.categoryId)),e.subCategoryId&&r.append("subCategoryId",String(e.subCategoryId)),(e.images||[]).slice(0,3).forEach((e=>{r.append("images",e)})),i({payload:r})}}),T=()=>{P.resetForm(),null===o||void 0===o||o()},O=(0,l.useMemo)((()=>{const e=Number(P.values.categoryId||0);return e?(S||[]).filter((r=>Number(r.categoryId)===e)):[]}),[P.values.categoryId,S]);return(0,F.jsxs)(t.A,{open:a,onClose:T,fullWidth:!0,maxWidth:"md",children:[(0,F.jsx)(s.A,{children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f"}),(0,F.jsxs)("form",{onSubmit:P.handleSubmit,encType:"multipart/form-data",children:[(0,F.jsx)(d.A,{children:(0,F.jsxs)(c.A,{spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629)",name:"nameEn",placeholder:"Office Chair",value:P.values.nameEn,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.nameEn&&P.errors.nameEn),helperText:P.touched.nameEn&&P.errors.nameEn,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629)",name:"nameAr",placeholder:"\u0643\u0631\u0633\u064a \u0645\u0643\u062a\u0628",value:P.values.nameAr,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.nameAr&&P.errors.nameAr),helperText:P.touched.nameAr&&P.errors.nameAr,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (EN)",name:"descriptionEn",placeholder:"Detailed English description",value:P.values.descriptionEn,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.descriptionEn&&P.errors.descriptionEn),helperText:P.touched.descriptionEn&&P.errors.descriptionEn,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (AR)",name:"descriptionAr",placeholder:"\u0648\u0635\u0641 \u0639\u0631\u0628\u064a \u062a\u0641\u0635\u064a\u0644\u064a",value:P.values.descriptionAr,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.descriptionAr&&P.errors.descriptionAr),helperText:P.touched.descriptionAr&&P.errors.descriptionAr,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0644\u0633\u0639\u0631 (SAR)",name:"price",type:"number",inputProps:{min:0,step:"0.01"},value:P.values.price,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.price&&P.errors.price),helperText:P.touched.price&&P.errors.price,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 (SAR)",name:"discountPrice",type:"number",inputProps:{min:0,step:"0.01"},value:P.values.discountPrice,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.discountPrice&&P.errors.discountPrice),helperText:P.touched.discountPrice&&P.errors.discountPrice,fullWidth:!0})]}),(0,F.jsx)(k,{label:"\u0627\u0644\u0623\u0644\u0648\u0627\u0646",options:w.VI||[],placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0644\u0648\u0627\u0646",name:"colors",multiple:!0,value:P.values.colors,onChange:e=>P.setFieldValue("colors",e||[]),error:P.touched.colors&&P.errors.colors,helperText:P.touched.colors&&P.errors.colors}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u062e\u0635\u0627\u0626\u0635",name:"tags",placeholder:"office, chair, ergonomic",value:P.values.tags,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.tags&&P.errors.tags),helperText:P.touched.tags&&P.errors.tags,fullWidth:!0}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645",name:"categoryId",value:null!==(r=P.values.categoryId)&&void 0!==r?r:"",disabled:f,onChange:e=>P.setFieldValue("categoryId",Number(e.target.value)),onBlur:P.handleBlur,error:Boolean(P.touched.categoryId&&P.errors.categoryId),helperText:P.touched.categoryId&&P.errors.categoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==B&&void 0!==B?B:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0641\u0631\u0639\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"subCategoryId",value:null!==(n=P.values.subCategoryId)&&void 0!==n?n:"",onChange:e=>{const r=e.target.value;P.setFieldValue("subCategoryId",""===r?"":Number(r))},onBlur:P.handleBlur,error:Boolean(P.touched.subCategoryId&&P.errors.subCategoryId),helperText:P.touched.subCategoryId&&P.errors.subCategoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==O&&void 0!==O?O:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsxs)(c.A,{direction:"row",spacing:3,children:[(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.hasDelivery),onChange:e=>P.setFieldValue("hasDelivery",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.hasInstallation),onChange:e=>P.setFieldValue("hasInstallation",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0631\u0643\u064a\u0628"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.isActive),onChange:e=>P.setFieldValue("isActive",e.target.checked)}),label:"\u0645\u064f\u0641\u0639\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.isFeatured),onChange:e=>P.setFieldValue("isFeatured",e.target.checked)}),label:"\u0645\u0645\u064a\u0632"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(m.A,{variant:"subtitle2",sx:{mb:.5},children:["\u0627\u0644\u0635\u0648\u0631 (\u062d\u062a\u0649 ",3,")"]}),(0,F.jsx)(u.A,{name:"images",type:"file",inputProps:{accept:G.join(","),multiple:!0},onChange:e=>{const r=Array.from(e.target.files||[]);P.setFieldValue("images",r)},error:Boolean(P.touched.images&&P.errors.images),helperText:P.touched.images&&P.errors.images,fullWidth:!0})]})]})}),(0,F.jsxs)(v.A,{children:[(0,F.jsx)(x.A,{onClick:T,disabled:b,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(x.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:b||!P.dirty,children:b?(0,F.jsx)(A.A,{size:22,sx:{color:"#000"}}):"\u0625\u0636\u0627\u0641\u0629"})]})]})]})}var Z=n(6340),ee=n(2074),re=n(8501),ne=n(2043),ae=n(8102),oe=n(1606),le=n(1140);const ie=function(e){let{search:r,setSearch:n,onSearchChange:a,addProduct:o}=e;const l=(0,le.T)("products.create");return(0,F.jsxs)(ae.A,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",p:3,children:[(0,F.jsx)(ae.A,{width:"12rem",children:(0,F.jsx)(oe.A,{placeholder:"Search...",value:r,size:"small",fullWidth:!0,onChange:e=>{let{currentTarget:r}=e;n(r.value),a(r.value)}})}),l&&(0,F.jsxs)(_.A,{children:[" ",(0,F.jsx)(x.A,{variant:"contained",sx:{color:"#FFF"},onClick:()=>o.onOpen(),children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c"})]})," "]})};var te=n(6546);const se={scope:V.e.PRODUCTS},de=(V.e.CATEGORIES_TYPES,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,te.I)({queryKey:[se,e],queryFn:()=>(0,M.d$)(e),keepPreviousData:!0,staleTime:3e4})});var ce=n(6896);const ue=function(){var e,r;const[n,a]=(0,l.useState)(),[o,t]=(0,ee.ok)(),s=Number(o.get("page")||1),d=o.get("search")||"",[c,u]=l.useState(null),h=(0,U.j)(),p=(0,U.j)(),g=(0,U.j)(),m=(0,le.T)("products.edit"),v=(0,le.T)("products.update"),x=(0,le.T)("products.delete"),{data:A,isLoading:j,isError:y,refetch:b}=de({page:s,searchParam:n?d:void 0,limit:10}),C=(0,l.useMemo)((()=>{var e;return(null===A||void 0===A||null===(e=A.data)||void 0===e?void 0:e.products)||[]}),[A]),f=(0,ne.useAsyncDebounce)((e=>{const r=new URLSearchParams(o);e?r.set("search",e):r.delete("search"),r.set("page","1"),t(r,{replace:!0})}),200);(0,l.useEffect)((()=>{b()}),[s,d]);const I=C.length>0?{columns:[{Header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"name",width:"20%"},{Header:"\u0627\u0644\u0633\u0639\u0631",accessor:"price",width:"5%"},{Header:"\u0627\u0644\u062e\u0635\u0645",accessor:"discount",width:"5%"},{Header:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641",accessor:"category",width:"10%"},{Header:"\u0642\u0627\u0628\u0644 \u0644\u0644\u0634\u062d\u0646",accessor:"delivery",width:"20%"},{Header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",width:"30%"}],rows:null===C||void 0===C?void 0:C.map((e=>{var r;return{id:e.id,name:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,F.jsx)("img",{src:e.images[0].url||"",alt:e.nameAr,width:40,height:40,style:{borderRadius:"50%"},crossOrigin:"anonymous",loading:"lazy"}),(0,F.jsx)("span",{style:{maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},title:null===e||void 0===e?void 0:e.nameAr,children:null===e||void 0===e?void 0:e.nameAr})]})}),price:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,F.jsx)("span",{children:Number(null===e||void 0===e?void 0:e.price).toFixed(2)}),(0,F.jsx)("img",{src:ce.A,alt:"\u0631\u064a\u0627\u0644",width:20,height:20,crossOrigin:"anonymous",loading:"lazy"})]})}),discount:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,F.jsx)("span",{children:Number(null===e||void 0===e?void 0:e.discountPrice).toFixed(2)}),(0,F.jsx)("img",{src:ce.A,alt:"\u0631\u064a\u0627\u0644",width:20,height:20,crossOrigin:"anonymous",loading:"lazy"})]})}),category:(null===(r=e.category)||void 0===r?void 0:r.nameAr)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",delivery:null!==e&&void 0!==e&&e.hasDelivery?"\u0646\u0639\u0645":"\u0644\u0627",actions:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(m||v)&&(0,F.jsx)(i.A,{style:{cursor:"pointer",zIndex:1e4},onClick:r=>{r.stopPropagation(),(e=>{h.onOpen(),u(e)})(e)},children:"edit"})," ",x&&(0,F.jsx)(i.A,{style:{cursor:"pointer",color:"red"},onClick:r=>{r.stopPropagation(),(e=>{p.onOpen(),u(e)})(e)},children:"delete"})," "]})})}}))}:{};return y?(0,F.jsx)("div",{children:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ie,{search:n,setSearch:a,onSearchChange:f,addProduct:g}),j?(0,F.jsx)(Z.A,{table:I,rows:6,columns:3}):(0,F.jsx)(re.A,{table:null!==I&&void 0!==I?I:{columns:[],rows:[]},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,totalPages:null===A||void 0===A||null===(e=A.data)||void 0===e||null===(r=e.pagination)||void 0===r?void 0:r.totalPages,pageNumber:s,noEndBorder:!0,handlePageChange:(e,r)=>{const n=new URLSearchParams(o);n.set("page",String(r)),t(n,{replace:!0})},url:"products"}),c&&(0,F.jsx)(H,{open:h.open,onClose:h.onClose,product:c}),c&&(0,F.jsx)(Q,{open:p.open,onClose:p.onClose,productId:null===c||void 0===c?void 0:c.id}),(0,F.jsx)(X,{open:g.open,onClose:g.onClose})]})};const he=function(){return(0,F.jsxs)(a.A,{children:[(0,F.jsx)(o.A,{}),(0,F.jsx)(ue,{})]})}},9385:(e,r,n)=>{n.d(r,{Bj:()=>l,DD:()=>t,Ok:()=>s,d$:()=>o,vc:()=>i});var a=n(9591);const o=async e=>{let{page:r,searchParam:n,limit:o}=e;return(await a.A.get("/api/v1/dashboard/products?limit=".concat(o).concat(r?"&page=".concat(r):"").concat(n?"&search=".concat(n):""))).data},l=e=>a.A.post("/api/v1/dashboard/products",e,{headers:{"Content-Type":"multipart/form-data"},transformRequest:e=>e}).then((e=>e.data)),i=(e,r)=>a.A.put("/api/v1/dashboard/products/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"},transformRequest:e=>e}).then((e=>e.data)),t=e=>a.A.delete("/api/v1/dashboard/products/".concat(e)).then((e=>e.data)),s=async e=>(await a.A.get("/api/v1/dashboard/products/".concat(e))).data}}]);