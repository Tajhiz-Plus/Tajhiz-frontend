"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[5],{2982:(e,o,r)=>{r.d(o,{G:()=>i});var t=r(6546),n=r(315),a=r(6965);const s=[{scope:n.e.PERMISSIONS}],i=()=>(0,t.I)({queryKey:s,queryFn:a.VE})},3038:(e,o,r)=>{r.d(o,{A:()=>w});var t=r(8587),n=r(8168),a=r(9950),s=r(2004),i=r(8465),c=r(9269),l=r(6282),d=r(3235),h=r(4414);const u=(0,d.A)((0,h.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,d.A)((0,h.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),v=(0,d.A)((0,h.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var m=r(1676),x=r(8463),A=r(9254),j=r(9608),y=r(1763),f=r(423);function k(e){return(0,f.Ay)("MuiCheckbox",e)}const b=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),z=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],g=(0,A.Ay)(l.A,{shouldForwardProp:e=>(0,j.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,r.indeterminate&&o.indeterminate,o["size".concat((0,m.A)(r.size))],"default"!==r.color&&o["color".concat((0,m.A)(r.color))]]}})((e=>{let{theme:o,ownerState:r}=e;return(0,n.A)({color:(o.vars||o).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:o.vars?"rgba(".concat("default"===r.color?o.vars.palette.action.activeChannel:o.vars.palette[r.color].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,c.X4)("default"===r.color?o.palette.action.active:o.palette[r.color].main,o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{["&.".concat(b.checked,", &.").concat(b.indeterminate)]:{color:(o.vars||o).palette[r.color].main},["&.".concat(b.disabled)]:{color:(o.vars||o).palette.action.disabled}})})),C=(0,h.jsx)(p,{}),S=(0,h.jsx)(u,{}),I=(0,h.jsx)(v,{}),w=a.forwardRef((function(e,o){var r,c;const l=(0,x.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=C,color:u="primary",icon:p=S,indeterminate:v=!1,indeterminateIcon:A=I,inputProps:j,size:y="medium",className:f}=l,b=(0,t.A)(l,z),w=v?A:p,E=v?A:d,F=(0,n.A)({},l,{color:u,indeterminate:v,size:y}),R=(e=>{const{classes:o,indeterminate:r,color:t,size:a}=e,s={root:["root",r&&"indeterminate","color".concat((0,m.A)(t)),"size".concat((0,m.A)(a))]},c=(0,i.A)(s,k,o);return(0,n.A)({},o,c)})(F);return(0,h.jsx)(g,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":v},j),icon:a.cloneElement(w,{fontSize:null!=(r=w.props.fontSize)?r:y}),checkedIcon:a.cloneElement(E,{fontSize:null!=(c=E.props.fontSize)?c:y}),ownerState:F,ref:o,className:(0,s.A)(R.root,f)},b,{classes:R}))}))},5005:(e,o,r)=>{r.r(o),r.d(o,{default:()=>C});var t=r(9950),n=r(6491),a=r(4446),s=r(3038),i=r(2053),c=r(3230),l=r(226),d=r(6639),h=r(8157),u=r(881),p=r(8429),v=r(2982),m=r(6546),x=r(315),A=r(1728);const j=e=>[{scope:x.e.ROLE_DETAILS,roleId:e}];var y=r(3125),f=r(4414);function k(e){let{rows:o=10}=e;return(0,f.jsx)(n.A,{children:Array.from({length:o}).map(((e,o)=>(0,f.jsxs)(a.Ay,{divider:!0,sx:{py:.5,px:1.5},children:[(0,f.jsx)(y.A,{variant:"rounded",width:20,height:20,sx:{borderRadius:"4px",flexShrink:0}}),(0,f.jsxs)(n.A,{sx:{mx:1,width:"100%"},children:[(0,f.jsx)(y.A,{variant:"text",width:"35%",height:22}),(0,f.jsx)(y.A,{variant:"text",width:"18%",height:16,sx:{mt:.5}})]})]},o)))})}var b=r(5441),z=r(1778);var g=r(1201);const C=function(){var e,o,r;const[y,C]=(0,t.useState)([]),{id:S}=(0,p.g)(),I=(0,p.Zp)(),{data:w,isLoading:E}=(F=S,(0,m.I)({queryKey:j(F),queryFn:()=>(0,A.dH)(F),enabled:!!F}));var F;const{data:R,isLoading:L}=(0,v.G)(),{mutate:M,isPending:P}=(e=>{let{onSuccess:o,onError:r}=e;const t=(0,b.jE)();return(0,z.n)({mutationFn:e=>{let{roleId:o,permissions:r}=e;return(0,A.Ul)(o,r)},onSuccess:(e,r,n)=>{var a;t.invalidateQueries({queryKey:(a=r.roleId,[{scope:x.e.ROLE_DETAILS,roleId:a}])}),null===o||void 0===o||o(e,r,n)},onError:(e,o,t)=>{console.error("Error updating role permissions",e),null===r||void 0===r||r(e,o,t)}})})({onSuccess:()=>{g.oR.success("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062f\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"),I("/roles")},onError:e=>{g.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}}),H=(null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.permissions)||[],O=(null===w||void 0===w||null===(o=w.data)||void 0===o||null===(r=o.role)||void 0===r?void 0:r.rolePermissions)||[];return(0,t.useEffect)((()=>{O.length&&C(O.map((e=>e.permissionId)))}),[O]),(0,f.jsxs)(h.A,{children:[(0,f.jsx)(u.A,{}),L||E?(0,f.jsx)(k,{rows:15}):(0,f.jsxs)(n.A,{children:[H.map((e=>{const o=y.includes(e.id);return(0,f.jsxs)(a.Ay,{divider:!0,sx:{py:.5,px:1.5},children:[(0,f.jsx)(s.A,{edge:"start",checked:o,onChange:()=>{return o=e.id,void C((e=>e.includes(o)?e.filter((e=>e!==o)):[...e,o]));var o}}),(0,f.jsxs)(n.A,{sx:{mx:1},children:[(0,f.jsx)(i.A,{variant:"body2",fontWeight:600,children:e.nameAr}),(0,f.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:["(",e.key,")"]})]})]},e.id)})),(0,f.jsxs)(c.A,{direction:"row",spacing:1,sx:{mt:3},justifyContent:"flex-start",children:[(0,f.jsx)(l.A,{variant:"contained",sx:{color:"#FFF"},onClick:()=>{M({roleId:S,permissions:y})},children:P?(0,f.jsx)(d.A,{size:22,sx:{color:"#FFF"}}):"\u062d\u0641\u0638"}),(0,f.jsx)(l.A,{variant:"outlined",sx:{color:"#000",borderColor:"#000","&:hover":{borderColor:"#000"}},onClick:()=>I("/roles"),children:"\u0627\u0644\u063a\u0627\u0621"})]})]})]})}},6965:(e,o,r)=>{r.d(o,{Ft:()=>s,LA:()=>a,VE:()=>n,pK:()=>i});var t=r(9591);const n=async()=>(await t.A.get("/api/v1/permissions")).data,a=(e,o)=>t.A.put("/api/v1/permissions/".concat(e),o).then((e=>e.data)),s=e=>t.A.post("/api/v1/permissions",e).then((e=>e.data)),i=e=>t.A.delete("/api/v1/permissions/".concat(e)).then((e=>e.data))}}]);