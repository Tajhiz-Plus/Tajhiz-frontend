"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[336],{1336:(e,r,a)=>{a.r(r),a.d(r,{default:()=>ue});var n=a(8157),l=a(881),o=a(9950),i=a(4919),t=a(3464),s=a(33),d=a(8170),c=a(3962),u=a(47),h=a(3266),p=a(6497),g=a(7324),v=a(2053),m=a(9739),A=a(226),x=a(6639),b=a(3939),j=a(1201),y=a(9379),C=a(45),f=a(9697),I=a(3038),E=a(2394),B=a(2606),F=a(4414);const S=["label","placeholder","options","value","onChange","multiple","disabled","error","helperText"],P=(0,F.jsx)(E.A,{fontSize:"small"}),k=(0,F.jsx)(B.A,{fontSize:"small"});function w(e){let{label:r="\u0627\u062e\u062a\u0631",placeholder:a="\u0627\u0628\u062d\u062b...",options:n=[],value:l,onChange:o,multiple:i=!1,disabled:t=!1,error:s,helperText:d}=e,c=(0,C.A)(e,S);return(0,F.jsx)(f.A,(0,y.A)({multiple:i,disableCloseOnSelect:i,options:n,value:l||(i?[]:null),onChange:(e,r)=>null===o||void 0===o?void 0:o(r),getOptionLabel:e=>{var r;return null!==(r=null===e||void 0===e?void 0:e.label)&&void 0!==r?r:""},renderOption:(e,r,a)=>{let{selected:n}=a;return(0,F.jsxs)("li",(0,y.A)((0,y.A)({},e),{},{children:[i&&(0,F.jsx)(I.A,{icon:P,checkedIcon:k,style:{marginRight:8},checked:n}),r.label]}))},renderInput:e=>(0,F.jsx)(u.A,(0,y.A)((0,y.A)({},e),{},{label:r,placeholder:a,error:Boolean(s),helperText:d})),filterSelectedOptions:!0,clearOnBlur:!1,autoHighlight:!0,fullWidth:!0,disabled:t},c))}var T=a(2578),O=a(5318),q=a(9714);const R=["image/jpeg","image/png","image/webp","image/jpg"],W=q.Ik({nameEn:q.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),nameAr:q.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),descriptionEn:q.Yj().max(5e3),descriptionAr:q.Yj().max(5e3),price:q.ai().typeError("\u0627\u0644\u0633\u0639\u0631 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").required("\u0627\u0644\u0633\u0639\u0631 \u0645\u0637\u0644\u0648\u0628").min(0,"\u0627\u0644\u0633\u0639\u0631 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0"),discountPrice:q.ai().typeError("\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").min(0,"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0").nullable(),colors:q.YO().of(q.Ik({id:q.gl().required(),label:q.Yj().required()})).min(1,"\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),hasDelivery:q.zM().required(),hasInstallation:q.zM().required(),isActive:q.zM().required(),isFeatured:q.zM().required(),tags:q.Yj().required("\u0639\u0644\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0637\u0644\u0648\u0628\u0629").test("not-empty-tags","\u0623\u062f\u062e\u0644 \u0648\u0633\u0645\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",(e=>(e||"").split(",").map((e=>e.trim())).filter(Boolean).length>0)),categoryId:q.ai().typeError("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628").required("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),subCategoryId:q.ai().typeError("\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629").nullable(),images:q.YO().of(q.gl().test("fileType","\u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0635\u0648\u0631\u0629",(e=>!!e&&R.includes(e.type)))).max(3,"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0635\u0648\u0631 ".concat(3)).min(1,"\u0623\u0636\u0641 \u0635\u0648\u0631\u0629 \u0648\u0627\u062d\u062f\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u0644\u0635\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0629")}),D=q.Ik({nameEn:q.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),nameAr:q.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628").max(200),descriptionEn:q.Yj().max(5e3),descriptionAr:q.Yj().max(5e3),price:q.ai().typeError("\u0627\u0644\u0633\u0639\u0631 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").required("\u0627\u0644\u0633\u0639\u0631 \u0645\u0637\u0644\u0648\u0628").min(0,"\u0627\u0644\u0633\u0639\u0631 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0"),discountPrice:q.ai().typeError("\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0631\u0642\u0645\u064b\u0627").min(0,"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 0").nullable(),colors:q.YO().of(q.Ik({id:q.gl().required(),label:q.Yj().required()})).min(1,"\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644").required("\u0627\u062e\u062a\u0631 \u0644\u0648\u0646\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),hasDelivery:q.zM().required(),hasInstallation:q.zM().required(),isActive:q.zM().required(),isFeatured:q.zM().required(),tags:q.Yj().required("\u0639\u0644\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0637\u0644\u0648\u0628\u0629").test("not-empty-tags","\u0623\u062f\u062e\u0644 \u0648\u0633\u0645\u064b\u0627 \u0648\u0627\u062d\u062f\u064b\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",(e=>(e||"").split(",").map((e=>e.trim())).filter(Boolean).length>0)),categoryId:q.ai().typeError("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628").required("\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),subCategoryId:q.ai().typeError("\u0642\u064a\u0645\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629").nullable(),images:q.YO().of(q.gl().test("fileType","\u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0635\u0648\u0631\u0629",(e=>!!e&&R.includes(e.type)))).max(3,"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0635\u0648\u0631 ".concat(3))});var V=a(5441),N=a(1778),z=a(315),M=a(9385);const Y=[{scope:z.e.PRODUCTS}],H=["image/jpeg","image/png","image/webp","image/jpg"];function L(e){var r,a;let{open:n,onClose:l,product:i}=e;const{mutate:y,isPending:C}=(e=>{let{onSuccess:r,onError:a}=e;const n=(0,V.jE)();return(0,N.n)({mutationFn:e=>{let{id:r,payload:a}=e;return(0,M.vc)(r,a)},onSuccess:(e,a,l)=>{n.invalidateQueries({queryKey:Y}),null===r||void 0===r||r(e,a,l)},onError:(e,r,n)=>{null===a||void 0===a||a(e,r,n)}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),q.resetForm(),null===l||void 0===l||l()},onError:e=>{var r,a;const n=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||(null===e||void 0===e?void 0:e.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639";j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(n))}}),{data:f,isLoading:I}=(0,O.Yv)(),{data:E,isLoading:B}=(0,O.Ay)(),S=(0,o.useMemo)((()=>{var e;return(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.categories)||[]}),[f]),P=(0,o.useMemo)((()=>(null===E||void 0===E?void 0:E.data)||[]),[E]),k=T.V.filter((e=>i.colors.includes(e.value))),q=(0,b.Wx)({initialValues:{nameEn:(null===i||void 0===i?void 0:i.nameEn)||"",nameAr:(null===i||void 0===i?void 0:i.nameAr)||"",descriptionEn:(null===i||void 0===i?void 0:i.descriptionEn)||"",descriptionAr:(null===i||void 0===i?void 0:i.descriptionAr)||"",price:(null===i||void 0===i?void 0:i.price)||"",discountPrice:(null===i||void 0===i?void 0:i.discountPrice)||"",colors:k.length>0?k:[],hasDelivery:(null===i||void 0===i?void 0:i.hasDelivery)||!1,hasInstallation:(null===i||void 0===i?void 0:i.hasInstallation)||!1,isActive:(null===i||void 0===i?void 0:i.isActive)||!1,isFeatured:(null===i||void 0===i?void 0:i.isFeatured)||!1,tags:(null===i||void 0===i?void 0:i.tags.join(", "))||"",categoryId:(null===i||void 0===i?void 0:i.categoryId)||"",subCategoryId:(null===i||void 0===i?void 0:i.subCategoryId)||"",images:[]},enableReinitialize:!0,validationSchema:D,validateOnBlur:!0,validateOnChange:!1,onSubmit:e=>{const r=new FormData;r.append("nameEn",e.nameEn),r.append("nameAr",e.nameAr),r.append("descriptionEn",e.descriptionEn||""),r.append("descriptionAr",e.descriptionAr||""),r.append("price",Number(e.price)),""!==e.discountPrice&&null!==e.discountPrice&&r.append("discountPrice",Number(e.discountPrice));const a=e.colors.map((e=>e.value)).join(",");r.append("colors",a),r.append("hasDelivery",String(e.hasDelivery)),r.append("hasInstallation",String(e.hasInstallation)),r.append("isActive",String(e.isActive)),r.append("isFeatured",String(e.isFeatured)),r.append("tags",e.tags),r.append("categoryId",String(e.categoryId)),e.subCategoryId&&r.append("subCategoryId",String(e.subCategoryId)),(e.images||[]).slice(0,3).forEach((e=>{r.append("images",e)})),y({payload:r,id:i.id})}}),R=()=>{q.resetForm(),null===l||void 0===l||l()},W=(0,o.useMemo)((()=>{const e=Number(q.values.categoryId||0);return e?(P||[]).filter((r=>Number(r.categoryId)===e)):[]}),[q.values.categoryId,P]);return(0,F.jsxs)(t.A,{open:n,onClose:R,fullWidth:!0,maxWidth:"md",children:[(0,F.jsx)(s.A,{children:"\u062a\u0639\u062f\u064a\u0644 \u0645\u0646\u062a\u062c "}),(0,F.jsxs)("form",{onSubmit:q.handleSubmit,encType:"multipart/form-data",children:[(0,F.jsx)(d.A,{children:(0,F.jsxs)(c.A,{spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629)",name:"nameEn",placeholder:"Office Chair",value:q.values.nameEn,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.nameEn&&q.errors.nameEn),helperText:q.touched.nameEn&&q.errors.nameEn,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629)",name:"nameAr",placeholder:"\u0643\u0631\u0633\u064a \u0645\u0643\u062a\u0628",value:q.values.nameAr,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.nameAr&&q.errors.nameAr),helperText:q.touched.nameAr&&q.errors.nameAr,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (EN)",name:"descriptionEn",placeholder:"Detailed English description",value:q.values.descriptionEn,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.descriptionEn&&q.errors.descriptionEn),helperText:q.touched.descriptionEn&&q.errors.descriptionEn,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (AR)",name:"descriptionAr",placeholder:"\u0648\u0635\u0641 \u0639\u0631\u0628\u064a \u062a\u0641\u0635\u064a\u0644\u064a",value:q.values.descriptionAr,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.descriptionAr&&q.errors.descriptionAr),helperText:q.touched.descriptionAr&&q.errors.descriptionAr,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0644\u0633\u0639\u0631 (SAR)",name:"price",type:"number",inputProps:{min:0,step:"0.01"},value:q.values.price,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.price&&q.errors.price),helperText:q.touched.price&&q.errors.price,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 (SAR)",name:"discountPrice",type:"number",inputProps:{min:0,step:"0.01"},value:q.values.discountPrice,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.discountPrice&&q.errors.discountPrice),helperText:q.touched.discountPrice&&q.errors.discountPrice,fullWidth:!0})]}),(0,F.jsx)(w,{label:"\u0627\u0644\u0623\u0644\u0648\u0627\u0646",options:T.V||[],placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0644\u0648\u0627\u0646",name:"colors",multiple:!0,value:q.values.colors,onChange:e=>q.setFieldValue("colors",e||[]),error:q.touched.colors&&q.errors.colors,helperText:q.touched.colors&&q.errors.colors}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u062e\u0635\u0627\u0626\u0635",name:"tags",placeholder:"office, chair, ergonomic",value:q.values.tags,onChange:q.handleChange,onBlur:q.handleBlur,error:Boolean(q.touched.tags&&q.errors.tags),helperText:q.touched.tags&&q.errors.tags,fullWidth:!0}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645",name:"categoryId",value:null!==(r=q.values.categoryId)&&void 0!==r?r:"",disabled:I,onChange:e=>q.setFieldValue("categoryId",Number(e.target.value)),onBlur:q.handleBlur,error:Boolean(q.touched.categoryId&&q.errors.categoryId),helperText:q.touched.categoryId&&q.errors.categoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==S&&void 0!==S?S:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0641\u0631\u0639\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"subCategoryId",value:null!==(a=q.values.subCategoryId)&&void 0!==a?a:"",onChange:e=>{const r=e.target.value;q.setFieldValue("subCategoryId",""===r?"":Number(r))},onBlur:q.handleBlur,error:Boolean(q.touched.subCategoryId&&q.errors.subCategoryId),helperText:q.touched.subCategoryId&&q.errors.subCategoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==W&&void 0!==W?W:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsxs)(c.A,{direction:"row",spacing:3,children:[(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(q.values.hasDelivery),onChange:e=>q.setFieldValue("hasDelivery",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(q.values.hasInstallation),onChange:e=>q.setFieldValue("hasInstallation",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0631\u0643\u064a\u0628"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(q.values.isActive),onChange:e=>q.setFieldValue("isActive",e.target.checked)}),label:"\u0645\u064f\u0641\u0639\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(q.values.isFeatured),onChange:e=>q.setFieldValue("isFeatured",e.target.checked)}),label:"\u0645\u0645\u064a\u0632"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(v.A,{variant:"subtitle2",sx:{mb:.5},children:["\u0627\u0644\u0635\u0648\u0631 (\u062d\u062a\u0649 ",3,")"]}),(0,F.jsx)(u.A,{name:"images",type:"file",inputProps:{accept:H.join(","),multiple:!0},onChange:e=>{const r=Array.from(e.target.files||[]);q.setFieldValue("images",r)},error:Boolean(q.touched.images&&q.errors.images),helperText:q.touched.images&&q.errors.images,fullWidth:!0})]})]})}),(0,F.jsxs)(m.A,{children:[(0,F.jsx)(A.A,{onClick:R,disabled:C,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(A.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:C||!q.dirty,children:C?(0,F.jsx)(x.A,{size:22,sx:{color:"#000"}}):"\u062a\u0639\u062f\u064a\u0644"})]})]})]})}var _=a(7378),U=a(6491);a(2877);const K=[{scope:z.e.PRODUCTS}];function Q(e){let{open:r,onClose:a,productId:n}=e;const{mutate:l,isPending:o}=(e=>{let{onSuccess:r,onError:a}=e;const n=(0,V.jE)();return(0,N.n)({mutationFn:e=>{let{productId:r}=e;return(0,M.DD)(r)},onSuccess:(e,a,l)=>{n.invalidateQueries({queryKey:K}),null===r||void 0===r||r(e,a,l)},onError:(e,r,n)=>{null===a||void 0===a||a(e,r,n)}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),a()},onError:e=>{j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}});return(0,F.jsxs)(t.A,{open:r,onClose:a,fullWidth:!0,maxWidth:"xs",children:[(0,F.jsx)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,F.jsxs)(U.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:2,borderRadius:"50%",backgroundColor:"#FEF9F9",width:"fit-content"},children:[" ",(0,F.jsx)(i.A,{color:"error",children:"delete"})]})}),(0,F.jsx)(d.A,{sx:{textAlign:"center"},children:(0,F.jsx)(v.A,{children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c "})}),(0,F.jsxs)(m.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,F.jsx)(A.A,{onClick:a,disabled:o,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(A.A,{variant:"contained",sx:{color:"#FFF",backgroundColor:"#F75555","&:hover":{backgroundColor:"#d63f3f"},"&:focus":{outline:"none",backgroundColor:"#d63f3f"},"&:active":{backgroundColor:"#d63f3f",boxShadow:"none"}},disableElevation:!0,onClick:()=>{l({productId:n})},disabled:o,children:o?(0,F.jsx)(x.A,{size:22,sx:{color:"#000"}}):"\u062d\u0630\u0641"})," "]})]})}const G=[{scope:z.e.PRODUCTS}],$=["image/jpeg","image/png","image/webp","image/jpg"],J=W;function X(e){var r,a;let{open:n,onClose:l}=e;const{mutate:i,isPending:y}=(e=>{let{onSuccess:r,onError:a}=e;const n=(0,V.jE)();return(0,N.n)({mutationFn:e=>{let{payload:r}=e;return(0,M.Bj)(r)},onSuccess:(e,a,l)=>{n.invalidateQueries({queryKey:G}),null===r||void 0===r||r(e,a,l)},onError:(e,r,n)=>{null===a||void 0===a||a(e,r,n)}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),P.resetForm(),null===l||void 0===l||l()},onError:e=>{var r,a;const n=(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||(null===e||void 0===e?void 0:e.message)||"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639";j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(n))}}),{data:C,isLoading:f}=(0,O.Yv)(),{data:I,isLoading:E}=(0,O.Ay)(),B=(0,o.useMemo)((()=>{var e;return(null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.categories)||[]}),[C]),S=(0,o.useMemo)((()=>(null===I||void 0===I?void 0:I.data)||[]),[I]),P=(0,b.Wx)({initialValues:{nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",price:"",discountPrice:"",colors:[],hasDelivery:!1,hasInstallation:!1,isActive:!0,isFeatured:!1,tags:"",categoryId:"",subCategoryId:"",images:[]},validationSchema:J,validateOnBlur:!0,validateOnChange:!1,onSubmit:e=>{const r=new FormData;r.append("nameEn",e.nameEn),r.append("nameAr",e.nameAr),r.append("descriptionEn",e.descriptionEn||""),r.append("descriptionAr",e.descriptionAr||""),r.append("price",Number(e.price)),""!==e.discountPrice&&null!==e.discountPrice&&r.append("discountPrice",Number(e.discountPrice));const a=e.colors.map((e=>e.value)).join(",");r.append("colors",a),r.append("hasDelivery",String(e.hasDelivery)),r.append("hasInstallation",String(e.hasInstallation)),r.append("isActive",String(e.isActive)),r.append("isFeatured",String(e.isFeatured)),r.append("tags",e.tags),r.append("categoryId",String(e.categoryId)),e.subCategoryId&&r.append("subCategoryId",String(e.subCategoryId)),(e.images||[]).slice(0,3).forEach((e=>{r.append("images",e)})),i({payload:r})}}),k=()=>{P.resetForm(),null===l||void 0===l||l()},q=(0,o.useMemo)((()=>{const e=Number(P.values.categoryId||0);return e?(S||[]).filter((r=>Number(r.categoryId)===e)):[]}),[P.values.categoryId,S]);return(0,F.jsxs)(t.A,{open:n,onClose:k,fullWidth:!0,maxWidth:"md",children:[(0,F.jsx)(s.A,{children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f"}),(0,F.jsxs)("form",{onSubmit:P.handleSubmit,encType:"multipart/form-data",children:[(0,F.jsx)(d.A,{children:(0,F.jsxs)(c.A,{spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629)",name:"nameEn",placeholder:"Office Chair",value:P.values.nameEn,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.nameEn&&P.errors.nameEn),helperText:P.touched.nameEn&&P.errors.nameEn,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c (\u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629)",name:"nameAr",placeholder:"\u0643\u0631\u0633\u064a \u0645\u0643\u062a\u0628",value:P.values.nameAr,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.nameAr&&P.errors.nameAr),helperText:P.touched.nameAr&&P.errors.nameAr,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (EN)",name:"descriptionEn",placeholder:"Detailed English description",value:P.values.descriptionEn,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.descriptionEn&&P.errors.descriptionEn),helperText:P.touched.descriptionEn&&P.errors.descriptionEn,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u0648\u0635\u0641 (AR)",name:"descriptionAr",placeholder:"\u0648\u0635\u0641 \u0639\u0631\u0628\u064a \u062a\u0641\u0635\u064a\u0644\u064a",value:P.values.descriptionAr,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.descriptionAr&&P.errors.descriptionAr),helperText:P.touched.descriptionAr&&P.errors.descriptionAr,fullWidth:!0,multiline:!0,minRows:2}),(0,F.jsxs)(c.A,{direction:"row",spacing:2,children:[(0,F.jsx)(u.A,{label:"\u0627\u0644\u0633\u0639\u0631 (SAR)",name:"price",type:"number",inputProps:{min:0,step:"0.01"},value:P.values.price,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.price&&P.errors.price),helperText:P.touched.price&&P.errors.price,fullWidth:!0}),(0,F.jsx)(u.A,{label:"\u0633\u0639\u0631 \u0627\u0644\u062e\u0635\u0645 (SAR)",name:"discountPrice",type:"number",inputProps:{min:0,step:"0.01"},value:P.values.discountPrice,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.discountPrice&&P.errors.discountPrice),helperText:P.touched.discountPrice&&P.errors.discountPrice,fullWidth:!0})]}),(0,F.jsx)(w,{label:"\u0627\u0644\u0623\u0644\u0648\u0627\u0646",options:T.V||[],placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0644\u0648\u0627\u0646",name:"colors",multiple:!0,value:P.values.colors,onChange:e=>P.setFieldValue("colors",e||[]),error:P.touched.colors&&P.errors.colors,helperText:P.touched.colors&&P.errors.colors}),(0,F.jsx)(u.A,{label:"\u0627\u0644\u062e\u0635\u0627\u0626\u0635",name:"tags",placeholder:"office, chair, ergonomic",value:P.values.tags,onChange:P.handleChange,onBlur:P.handleBlur,error:Boolean(P.touched.tags&&P.errors.tags),helperText:P.touched.tags&&P.errors.tags,fullWidth:!0}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645",name:"categoryId",value:null!==(r=P.values.categoryId)&&void 0!==r?r:"",disabled:f,onChange:e=>P.setFieldValue("categoryId",Number(e.target.value)),onBlur:P.handleBlur,error:Boolean(P.touched.categoryId&&P.errors.categoryId),helperText:P.touched.categoryId&&P.errors.categoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==B&&void 0!==B?B:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsx)(u.A,{select:!0,label:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0641\u0631\u0639\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"subCategoryId",value:null!==(a=P.values.subCategoryId)&&void 0!==a?a:"",onChange:e=>{const r=e.target.value;P.setFieldValue("subCategoryId",""===r?"":Number(r))},onBlur:P.handleBlur,error:Boolean(P.touched.subCategoryId&&P.errors.subCategoryId),helperText:P.touched.subCategoryId&&P.errors.subCategoryId,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:(null!==q&&void 0!==q?q:[]).map((e=>(0,F.jsx)(h.A,{value:Number(e.id),children:e.nameAr},e.id)))}),(0,F.jsxs)(c.A,{direction:"row",spacing:3,children:[(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.hasDelivery),onChange:e=>P.setFieldValue("hasDelivery",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.hasInstallation),onChange:e=>P.setFieldValue("hasInstallation",e.target.checked)}),label:"\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u0631\u0643\u064a\u0628"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.isActive),onChange:e=>P.setFieldValue("isActive",e.target.checked)}),label:"\u0645\u064f\u0641\u0639\u0644"}),(0,F.jsx)(p.A,{control:(0,F.jsx)(g.A,{checked:Boolean(P.values.isFeatured),onChange:e=>P.setFieldValue("isFeatured",e.target.checked)}),label:"\u0645\u0645\u064a\u0632"})]}),(0,F.jsxs)("div",{children:[(0,F.jsxs)(v.A,{variant:"subtitle2",sx:{mb:.5},children:["\u0627\u0644\u0635\u0648\u0631 (\u062d\u062a\u0649 ",3,")"]}),(0,F.jsx)(u.A,{name:"images",type:"file",inputProps:{accept:$.join(","),multiple:!0},onChange:e=>{const r=Array.from(e.target.files||[]);P.setFieldValue("images",r)},error:Boolean(P.touched.images&&P.errors.images),helperText:P.touched.images&&P.errors.images,fullWidth:!0})]})]})}),(0,F.jsxs)(m.A,{children:[(0,F.jsx)(A.A,{onClick:k,disabled:y,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,F.jsx)(A.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:y||!P.dirty,children:y?(0,F.jsx)(x.A,{size:22,sx:{color:"#000"}}):"\u0625\u0636\u0627\u0641\u0629"})]})]})]})}var Z=a(1443),ee=a(2074),re=a(8501),ae=a(2043),ne=a(8102),le=a(1606);const oe=function(e){let{search:r,setSearch:a,onSearchChange:n,addProduct:l}=e;return(0,F.jsxs)(ne.A,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",p:3,children:[(0,F.jsx)(ne.A,{width:"12rem",children:(0,F.jsx)(le.A,{placeholder:"Search...",value:r,size:"small",fullWidth:!0,onChange:e=>{let{currentTarget:r}=e;a(r.value),n(r.value)}})}),(0,F.jsxs)(U.A,{children:[" ",(0,F.jsx)(A.A,{variant:"contained",sx:{color:"#FFF"},onClick:()=>l.onOpen(),children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c"})]})]})};var ie=a(6546);const te={scope:z.e.PRODUCTS},se=(z.e.CATEGORIES_TYPES,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ie.I)({queryKey:[te,e],queryFn:()=>(0,M.d$)(e),keepPreviousData:!0,staleTime:3e4})});var de=a(6896);const ce=function(){var e,r;const[a,n]=(0,o.useState)(),[l,t]=(0,ee.ok)(),s=Number(l.get("page")||1),d=l.get("search")||"",[c,u]=o.useState(null),h=(0,_.j)(),p=(0,_.j)(),g=(0,_.j)(),{data:v,isLoading:m,isError:A,refetch:x}=se({page:s,searchParam:a?d:void 0,limit:10}),b=(0,o.useMemo)((()=>{var e;return(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.products)||[]}),[v]),j=(0,ae.useAsyncDebounce)((e=>{const r=new URLSearchParams(l);e?r.set("search",e):r.delete("search"),r.set("page","1"),t(r,{replace:!0})}),200);(0,o.useEffect)((()=>{x()}),[s,d]);const y=b.length>0?{columns:[{Header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"name",width:"20%"},{Header:"\u0627\u0644\u0633\u0639\u0631",accessor:"price",width:"5%"},{Header:"\u0627\u0644\u062e\u0635\u0645",accessor:"discount",width:"5%"},{Header:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641",accessor:"category",width:"10%"},{Header:"\u0642\u0627\u0628\u0644 \u0644\u0644\u0634\u062d\u0646",accessor:"delivery",width:"20%"},{Header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",width:"30%"}],rows:null===b||void 0===b?void 0:b.map((e=>{var r;return{id:e.id,name:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,F.jsx)("img",{src:e.images[0].url||"",alt:e.nameAr,width:40,height:40,style:{borderRadius:"50%"},crossOrigin:"anonymous",loading:"lazy"}),(0,F.jsx)("span",{style:{maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},title:null===e||void 0===e?void 0:e.nameAr,children:null===e||void 0===e?void 0:e.nameAr})]})}),price:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,F.jsx)("span",{children:Number(null===e||void 0===e?void 0:e.price).toFixed(2)}),(0,F.jsx)("img",{src:de.A,alt:"\u0631\u064a\u0627\u0644",width:20,height:20,crossOrigin:"anonymous",loading:"lazy"})]})}),discount:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,F.jsx)("span",{children:Number(null===e||void 0===e?void 0:e.discountPrice).toFixed(2)}),(0,F.jsx)("img",{src:de.A,alt:"\u0631\u064a\u0627\u0644",width:20,height:20,crossOrigin:"anonymous",loading:"lazy"})]})}),category:(null===(r=e.category)||void 0===r?void 0:r.nameAr)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",delivery:null!==e&&void 0!==e&&e.hasDelivery?"\u0646\u0639\u0645":"\u0644\u0627",actions:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,F.jsx)(i.A,{style:{cursor:"pointer"},onClick:()=>(e=>{h.onOpen(),u(e)})(e),children:"edit"}),(0,F.jsx)(i.A,{style:{cursor:"pointer",color:"red"},onClick:()=>(e=>{p.onOpen(),u(e)})(e),children:"delete"})]})})}}))}:{};return A?(0,F.jsx)("div",{children:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(oe,{search:a,setSearch:n,onSearchChange:j,addProduct:g}),m?(0,F.jsx)(Z.A,{table:y,rows:6,columns:3}):(0,F.jsx)(re.A,{table:null!==y&&void 0!==y?y:{columns:[],rows:[]},isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,totalPages:null===v||void 0===v||null===(e=v.data)||void 0===e||null===(r=e.pagination)||void 0===r?void 0:r.totalPages,pageNumber:s,noEndBorder:!0,handlePageChange:(e,r)=>{const a=new URLSearchParams(l);a.set("page",String(r)),t(a,{replace:!0})},canNavigate:!0}),c&&(0,F.jsx)(L,{open:h.open,onClose:h.onClose,product:c}),c&&(0,F.jsx)(Q,{open:p.open,onClose:p.onClose,productId:null===c||void 0===c?void 0:c.id}),(0,F.jsx)(X,{open:g.open,onClose:g.onClose})]})};const ue=function(){return(0,F.jsxs)(n.A,{children:[(0,F.jsx)(l.A,{}),(0,F.jsx)(ce,{})]})}},2394:(e,r,a)=>{var n=a(4994);r.A=void 0;var l=n(a(9526)),o=a(4414);r.A=(0,l.default)((0,o.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")},2578:(e,r,a)=>{a.d(r,{V:()=>n});const n=[{id:1,label:"\u0623\u062d\u0645\u0631",value:"red"},{id:2,label:"\u0623\u062e\u0636\u0631",value:"green"},{id:3,label:"\u0623\u0632\u0631\u0642",value:"blue"},{id:4,label:"\u0623\u0635\u0641\u0631",value:"yellow"},{id:5,label:"\u0628\u0631\u062a\u0642\u0627\u0644\u064a",value:"orange"},{id:6,label:"\u0628\u0646\u0641\u0633\u062c\u064a",value:"purple"},{id:7,label:"\u0632\u0647\u0631\u064a",value:"pink"},{id:8,label:"\u0623\u0633\u0648\u062f",value:"black"},{id:9,label:"\u0623\u0628\u064a\u0636",value:"white"},{id:10,label:"\u0631\u0645\u0627\u062f\u064a",value:"gray"},{id:11,label:"\u0628\u0646\u064a",value:"brown"},{id:12,label:"\u0633\u0645\u0627\u0648\u064a",value:"cyan"},{id:13,label:"\u0641\u064a\u0631\u0648\u0632\u064a",value:"turquoise"},{id:14,label:"\u0630\u0647\u0628\u064a",value:"gold"},{id:15,label:"\u0641\u0636\u064a",value:"silver"},{id:16,label:"\u0643\u0631\u064a\u0645\u064a",value:"beige"},{id:17,label:"\u0643\u062d\u0644\u064a",value:"navy"},{id:18,label:"\u0623\u0632\u0631\u0642 \u0641\u0627\u062a\u062d",value:"lightblue"},{id:19,label:"\u0623\u062e\u0636\u0631 \u0641\u0627\u062a\u062d",value:"lightgreen"},{id:20,label:"\u0623\u062d\u0645\u0631 \u063a\u0627\u0645\u0642",value:"darkred"}]},2606:(e,r,a)=>{var n=a(4994);r.A=void 0;var l=n(a(9526)),o=a(4414);r.A=(0,l.default)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")},6896:(e,r,a)=>{a.d(r,{A:()=>n});a(9950);const n=a.p+"static/media/SAR.87d3bbf61c3ce34a3573cd5450830ebe.svg"},7034:(e,r,a)=>{a.r(r),a.d(r,{capitalize:()=>l.A,createChainedFunction:()=>o,createSvgIcon:()=>i.A,debounce:()=>t.A,deprecatedPropType:()=>s,isMuiElement:()=>d.A,ownerDocument:()=>c.A,ownerWindow:()=>u.A,requirePropFactory:()=>h,setRef:()=>p,unstable_ClassNameGenerator:()=>y,unstable_useEnhancedEffect:()=>g.A,unstable_useId:()=>v.A,unsupportedProp:()=>m,useControlled:()=>A.A,useEventCallback:()=>x.A,useForkRef:()=>b.A,useIsFocusVisible:()=>j.A});var n=a(4501),l=a(1676);const o=a(5511).A;var i=a(5471),t=a(1209);const s=function(e,r){return()=>null};var d=a(3828),c=a(7402),u=a(827);const h=function(e,r){return()=>null};const p=a(5587).A;var g=a(9044),v=a(1014);const m=function(e,r,a,n,l){return null};var A=a(8733),x=a(1976),b=a(1506),j=a(2937);const y={configure:e=>{n.A.configure(e)}}},9385:(e,r,a)=>{a.d(r,{Bj:()=>o,DD:()=>t,Ok:()=>s,d$:()=>l,vc:()=>i});var n=a(9591);const l=async e=>{let{page:r,searchParam:a,limit:l}=e;return(await n.A.get("/api/v1/dashboard/products?limit=".concat(l).concat(r?"&page=".concat(r):"").concat(a?"&search=".concat(a):""))).data},o=e=>n.A.post("/api/v1/dashboard/products",e,{headers:{"Content-Type":"multipart/form-data"},transformRequest:e=>e}).then((e=>e.data)),i=(e,r)=>n.A.put("/api/v1/dashboard/products/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"},transformRequest:e=>e}).then((e=>e.data)),t=e=>n.A.delete("/api/v1/dashboard/products/".concat(e)).then((e=>e.data)),s=async e=>(await n.A.get("/api/v1/dashboard/products/".concat(e))).data},9526:(e,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=a(7034)}}]);