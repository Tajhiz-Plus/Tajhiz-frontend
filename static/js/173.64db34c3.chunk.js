"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[173],{392:(e,t,n)=>{var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")},3038:(e,t,n)=>{n.d(t,{A:()=>D});var i=n(8587),r=n(8168),s=n(9950),o=n(2004),l=n(8465),a=n(9269),d=n(6282),c=n(3235),h=n(4414);const u=(0,c.A)((0,h.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,c.A)((0,h.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,c.A)((0,h.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var A=n(1676),j=n(8463),p=n(9254),v=n(9608),g=n(1763),f=n(423);function b(e){return(0,f.Ay)("MuiCheckbox",e)}const y=(0,g.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],E=(0,p.Ay)(d.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,A.A)(n.size))],"default"!==n.color&&t["color".concat((0,A.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,a.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(y.checked,", &.").concat(y.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(y.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),w=(0,h.jsx)(x,{}),C=(0,h.jsx)(u,{}),R=(0,h.jsx)(m,{}),D=s.forwardRef((function(e,t){var n,a;const d=(0,j.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=w,color:u="primary",icon:x=C,indeterminate:m=!1,indeterminateIcon:p=R,inputProps:v,size:g="medium",className:f}=d,y=(0,i.A)(d,I),D=m?p:x,N=m?p:c,S=(0,r.A)({},d,{color:u,indeterminate:m,size:g}),W=(e=>{const{classes:t,indeterminate:n,color:i,size:s}=e,o={root:["root",n&&"indeterminate","color".concat((0,A.A)(i)),"size".concat((0,A.A)(s))]},a=(0,l.A)(o,b,t);return(0,r.A)({},t,a)})(S);return(0,h.jsx)(E,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":m},v),icon:s.cloneElement(D,{fontSize:null!=(n=D.props.fontSize)?n:g}),checkedIcon:s.cloneElement(N,{fontSize:null!=(a=N.props.fontSize)?a:g}),ownerState:S,ref:t,className:(0,o.A)(W.root,f)},y,{classes:W}))}))},4100:(e,t,n)=>{n.r(t),n.d(t,{capitalize:()=>r.A,createChainedFunction:()=>s,createSvgIcon:()=>o.A,debounce:()=>l.A,deprecatedPropType:()=>a,isMuiElement:()=>d.A,ownerDocument:()=>c.A,ownerWindow:()=>h.A,requirePropFactory:()=>u,setRef:()=>x,unstable_ClassNameGenerator:()=>b,unstable_useEnhancedEffect:()=>m.A,unstable_useId:()=>A,unsupportedProp:()=>j,useControlled:()=>p.A,useEventCallback:()=>v.A,useForkRef:()=>g.A,useIsFocusVisible:()=>f.A});var i=n(4501),r=n(1676);const s=n(5511).A;var o=n(3235),l=n(1209);const a=function(e,t){return()=>null};var d=n(3828),c=n(7402),h=n(827);const u=function(e,t){return()=>null};const x=n(5587).A;var m=n(9044);const A=n(3539).A;const j=function(e,t,n,i,r){return null};var p=n(8733),v=n(1976),g=n(1506),f=n(2937);const b={configure:e=>{i.A.configure(e)}}},7999:(e,t,n)=>{var i=n(4994);t.A=void 0;var r=i(n(9526)),s=n(4414);t.A=(0,r.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},9173:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var i=n(9379),r=n(9950),s=n(899),o=n(8089),l=n(4745),a=n(8102),d=n(8157),c=n(881),h=n(2498),u=n(1591),x=n(2578),m=n(4414);const A=function(e){let{order:t}=e;const n=(0,u.wA)(null===t||void 0===t?void 0:t.status);return(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,m.jsxs)(a.A,{children:[(0,m.jsx)(a.A,{mb:1,children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0637\u0644\u0628"})}),(0,m.jsxs)(h.A,{component:"p",variant:"button",color:"text",children:["\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628: ",(0,m.jsx)("b",{children:null===t||void 0===t?void 0:t.orderNumber})]}),(0,m.jsxs)(h.A,{component:"p",variant:"caption",color:"text",sx:{mt:.5},children:["\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628: ",(0,m.jsx)("b",{children:(i=null===t||void 0===t?void 0:t.createdAt,i?new Intl.DateTimeFormat("ar-eg",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(i)):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f")})]}),(0,m.jsxs)(h.A,{component:"p",variant:"caption",color:"text",sx:{mt:.5},children:["\u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639: ",(0,m.jsx)("b",{children:(0,x.eB)(null===t||void 0===t?void 0:t.paymentMethod)})]})]}),n]});var i};var j=n(8429),p=n(3852),v=n(3230),g=n(3125),f=n(6491);function b(){return(0,m.jsx)(a.A,{my:6,children:(0,m.jsx)(s.Ay,{container:!0,spacing:3,justifyContent:"center",children:(0,m.jsx)(s.Ay,{item:!0,xs:12,lg:8,children:(0,m.jsxs)(o.A,{children:[(0,m.jsx)(a.A,{pt:2,px:2,children:(0,m.jsxs)(s.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,m.jsx)(s.Ay,{item:!0,xs:12,md:"auto",children:(0,m.jsxs)(v.A,{spacing:1,children:[(0,m.jsx)(g.A,{variant:"text",width:180,height:28})," ",(0,m.jsx)(g.A,{variant:"text",width:260,height:18})," ",(0,m.jsx)(g.A,{variant:"text",width:140,height:18})," "]})}),(0,m.jsx)(s.Ay,{item:!0,children:(0,m.jsxs)(v.A,{direction:"row",spacing:1,children:[(0,m.jsx)(g.A,{variant:"rounded",width:92,height:36}),(0,m.jsx)(g.A,{variant:"rounded",width:120,height:36})]})})]})}),(0,m.jsx)(l.A,{}),(0,m.jsxs)(a.A,{pt:1,pb:3,px:2,children:[(0,m.jsx)(a.A,{mb:3,children:(0,m.jsxs)(s.Ay,{container:!0,alignItems:"center",spacing:2,children:[(0,m.jsx)(s.Ay,{item:!0,children:(0,m.jsx)(g.A,{variant:"circular",width:72,height:72})}),(0,m.jsx)(s.Ay,{item:!0,xs:!0,children:(0,m.jsxs)(v.A,{spacing:1,children:[(0,m.jsx)(g.A,{variant:"text",width:180,height:24})," ",(0,m.jsx)(g.A,{variant:"rounded",width:88,height:24})," ",(0,m.jsx)(g.A,{variant:"text",width:210,height:16})," "]})})]})}),(0,m.jsx)(l.A,{}),(0,m.jsx)(a.A,{mt:3,children:(0,m.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,m.jsx)(s.Ay,{item:!0,xs:12,md:6,lg:3,children:(0,m.jsx)(v.A,{spacing:3,children:[1,2,3,4].map((e=>(0,m.jsxs)(s.Ay,{container:!0,alignItems:"center",wrap:"nowrap",columnGap:2,children:[(0,m.jsx)(s.Ay,{item:!0,children:(0,m.jsx)(g.A,{variant:"circular",width:32,height:32})}),(0,m.jsxs)(s.Ay,{item:!0,xs:!0,children:[(0,m.jsx)(g.A,{variant:"text",height:18,width:"70%"}),(0,m.jsx)(g.A,{variant:"text",height:14,width:"50%"})]})]},e)))})}),(0,m.jsxs)(s.Ay,{item:!0,xs:12,md:6,lg:5,children:[(0,m.jsxs)(v.A,{spacing:1,mb:3,children:[(0,m.jsx)(g.A,{variant:"text",width:150,height:22}),(0,m.jsx)(g.A,{variant:"rounded",height:56})]}),(0,m.jsxs)(f.A,{children:[(0,m.jsx)(g.A,{variant:"text",width:180,height:22}),(0,m.jsx)(a.A,{mt:1,p:2,sx:{borderRadius:2,border:"1px solid rgba(0,0,0,0.08)"},children:(0,m.jsxs)(v.A,{spacing:1,children:[(0,m.jsx)(g.A,{variant:"text",width:"50%",height:18}),(0,m.jsx)(g.A,{variant:"text",width:"70%",height:18}),(0,m.jsx)(g.A,{variant:"text",width:"60%",height:18}),(0,m.jsx)(g.A,{variant:"text",width:"55%",height:18})]})})]})]}),(0,m.jsxs)(s.Ay,{item:!0,xs:12,lg:3,sx:{ml:"auto"},children:[(0,m.jsx)(v.A,{spacing:1,mb:2,children:(0,m.jsx)(g.A,{variant:"text",width:150,height:22})}),(0,m.jsxs)(v.A,{spacing:1.2,children:[[1,2,3].map((e=>(0,m.jsxs)(s.Ay,{container:!0,justifyContent:"space-between",children:[(0,m.jsx)(g.A,{variant:"text",width:90,height:18}),(0,m.jsx)(g.A,{variant:"text",width:60,height:18})]},e))),(0,m.jsx)(l.A,{sx:{my:1}}),(0,m.jsxs)(s.Ay,{container:!0,justifyContent:"space-between",children:[(0,m.jsx)(g.A,{variant:"text",width:70,height:22}),(0,m.jsx)(g.A,{variant:"text",width:80,height:24})]}),(0,m.jsx)(g.A,{variant:"rounded",height:40,sx:{mt:1}})]})]})]})})]})]})})})})}var y=n(3792),I=n(6896),E=n(6497),w=n(3038),C=n(5333),R=n(7999),D=n(7378),N=n(3464),S=n(33),W=n(8170),k=n(9925),z=n(3266),F=n(9739),P=n(6639),L=n(3939),O=n(9714),_=n(1201),V=n(5441),M=n(1778),T=n(315),Y=n(768);const G=[{scope:T.e.ORDERS}],U=["PENDING","CONFIRMED","PROCESSING","READY_FOR_DELIVERY","OUT_FOR_DELIVERY","DELIVERED","INSTALLED","CANCELLED","RETURNED","REFUNDED"],B=e=>{switch(e){case"PENDING":return"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631";case"CONFIRMED":return"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f";case"PROCESSING":return"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629";case"READY_FOR_DELIVERY":return"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0636\u064a\u0631 \u0644\u0644\u062a\u0648\u0635\u064a\u0644";case"OUT_FOR_DELIVERY":return"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0648\u0635\u064a\u0644";case"DELIVERED":return"\u062a\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644";case"INSTALLED":return"\u062a\u0645 \u0627\u0644\u062a\u0631\u0643\u064a\u0628";case"CANCELLED":return"\u0645\u0644\u063a\u064a";case"RETURNED":return"\u0645\u0631\u062a\u062c\u0639";case"REFUNDED":return"\u0645\u0633\u062a\u0631\u062f";default:return"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"}},H=O.Ik({status:O.Yj().required("\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0645\u0637\u0644\u0648\u0628\u0629")});const q=function(e){var t,n;let{open:i,onClose:r,item:s,orderId:o}=e;const l=(e=>{let{onSuccess:t,onError:n}=e;const i=(0,V.jE)();return(0,M.n)({mutationFn:e=>{let{id:t,orderItemId:n,payload:i}=e;return(0,Y.tX)(t,n,i)},onSuccess:(e,n,r)=>{const{id:s}=n;i.invalidateQueries({queryKey:(0,p.Q)(s.toString())}),i.invalidateQueries({queryKey:G}),null===t||void 0===t||t(e,n,r)},onError:(e,t,i)=>{null===n||void 0===n||n(e,t,i)}})})({onSuccess:()=>{_.oR.success("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{_.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0635\u0631"),console.error("Update order item error:",e)}}),a=(0,L.Wx)({initialValues:{status:(null===s||void 0===s||null===(t=s.tracking)||void 0===t?void 0:t.status)||"PENDING"},validationSchema:H,enableReinitialize:!0,onSubmit:e=>{if(null===s||void 0===s||!s.id||!o)return void _.oR.error("\u0645\u0639\u0631\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0623\u0648 \u0627\u0644\u0637\u0644\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const t={status:e.status};l.mutate({id:o,orderItemId:s.id,payload:t})}}),d=()=>{a.resetForm(),r()};return(0,m.jsxs)(N.A,{open:i,onClose:d,fullWidth:!0,maxWidth:"sm",children:[(0,m.jsx)(S.A,{children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",children:"\u062a\u0639\u062f\u064a\u0644 \u062d\u0627\u0644\u0629 \u0639\u0646\u0635\u0631 \u0627\u0644\u0637\u0644\u0628"})}),(0,m.jsxs)("form",{onSubmit:a.handleSubmit,noValidate:!0,children:[(0,m.jsx)(W.A,{children:(0,m.jsxs)(v.A,{spacing:3,children:[(0,m.jsxs)(f.A,{children:[(0,m.jsx)(h.A,{variant:"subtitle2",fontWeight:"medium",mb:1,children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0646\u0635\u0631"}),(0,m.jsx)(f.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#fafafa"},children:(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===s||void 0===s||null===(n=s.product)||void 0===n?void 0:n.nameAr})})]}),(0,m.jsx)(k.A,{select:!0,label:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0635\u0631",name:"status",value:a.values.status,onChange:a.handleChange,onBlur:a.handleBlur,error:a.touched.status&&Boolean(a.errors.status),helperText:a.touched.status&&a.errors.status,fullWidth:!0,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:U.map((e=>(0,m.jsx)(z.A,{value:e,children:B(e)},e)))})]})}),(0,m.jsxs)(F.A,{sx:{p:2},children:[(0,m.jsx)(y.A,{variant:"outlined",onClick:d,disabled:l.isPending,size:"small",sx:{color:"#000"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,m.jsx)(y.A,{type:"submit",variant:"contained",disabled:l.isPending||!a.dirty,size:"small",startIcon:l.isPending?(0,m.jsx)(P.A,{size:16,color:"inherit"}):null,children:l.isPending?"\u062c\u0627\u0631\u064a \u0627\u0644\u062d\u0641\u0638...":"\u062d\u0641\u0638"})]})]})]})},Q=[{scope:T.e.ORDERS}],K=["PENDING","CONFIRMED","PROCESSING","READY_FOR_DELIVERY","OUT_FOR_DELIVERY","DELIVERED","INSTALLED","CANCELLED","RETURNED","REFUNDED"],X=e=>{switch(e){case"PENDING":return"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631";case"CONFIRMED":return"\u062a\u0645 \u0627\u0644\u062a\u0623\u0643\u064a\u062f";case"PROCESSING":return"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629";case"READY_FOR_DELIVERY":return"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0636\u064a\u0631 \u0644\u0644\u062a\u0648\u0635\u064a\u0644";case"OUT_FOR_DELIVERY":return"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0648\u0635\u064a\u0644";case"DELIVERED":return"\u062a\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644";case"INSTALLED":return"\u062a\u0645 \u0627\u0644\u062a\u0631\u0643\u064a\u0628";case"CANCELLED":return"\u0645\u0644\u063a\u064a";case"RETURNED":return"\u0645\u0631\u062a\u062c\u0639";case"REFUNDED":return"\u0645\u0633\u062a\u0631\u062f";default:return"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"}},Z=O.Ik({status:O.Yj().required("\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0645\u0637\u0644\u0648\u0628\u0629")});const J=function(e){let{open:t,onClose:n,selectedItems:i,orderId:r,setSelectedItems:s}=e;const o=(e=>{let{onSuccess:t,onError:n,orderId:i}=e;const r=(0,V.jE)();return(0,M.n)({mutationFn:e=>(0,Y.wl)(e),onSuccess:(e,n,s)=>{i&&r.invalidateQueries({queryKey:(0,p.Q)(i.toString())}),r.invalidateQueries({queryKey:Q}),null===t||void 0===t||t(e,n,s)},onError:(e,t,i)=>{null===n||void 0===n||n(e,t,i)}})})({orderId:r,onSuccess:()=>{_.oR.success("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 ".concat(i.length," \u0639\u0646\u0635\u0631 \u0628\u0646\u062c\u0627\u062d")),n(),s(new Set)},onError:e=>{_.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0627\u0635\u0631"),console.error("Bulk update order items error:",e)}}),l=(0,L.Wx)({initialValues:{status:"PENDING"},validationSchema:Z,enableReinitialize:!0,onSubmit:e=>{if(!i||0===i.length)return void _.oR.error("\u0644\u0645 \u064a\u062a\u0645 \u062a\u062d\u062f\u064a\u062f \u0623\u064a \u0639\u0646\u0627\u0635\u0631 \u0644\u0644\u062a\u062d\u062f\u064a\u062b");const t={trackingIds:i.map((e=>{var t;return(null===(t=e.tracking)||void 0===t?void 0:t.id)||e.id})),status:e.status};o.mutate(t)}}),a=()=>{l.resetForm(),n()};return(0,m.jsxs)(N.A,{open:t,onClose:a,fullWidth:!0,maxWidth:"sm",children:[(0,m.jsx)(S.A,{children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",children:"\u062a\u0639\u062f\u064a\u0644 \u062c\u0645\u0627\u0639\u064a \u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0646\u0627\u0635\u0631"})}),(0,m.jsxs)("form",{onSubmit:l.handleSubmit,noValidate:!0,children:[(0,m.jsx)(W.A,{children:(0,m.jsxs)(v.A,{spacing:3,children:[(0,m.jsxs)(f.A,{children:[(0,m.jsxs)(h.A,{variant:"subtitle2",fontWeight:"medium",mb:1,children:["\u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629 (",i.length,")"]}),(0,m.jsx)(f.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#fafafa",maxHeight:150,overflowY:"auto"},children:(0,m.jsx)(v.A,{spacing:1,children:i.map(((e,t)=>{var n,i;return(0,m.jsxs)(f.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1,backgroundColor:"white",borderRadius:.5,border:"1px solid #f0f0f0"},gap:2,children:[(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.nameAr}),(0,u.wA)(null===e||void 0===e||null===(i=e.tracking)||void 0===i?void 0:i.status)]},t)}))})})]}),(0,m.jsx)(k.A,{select:!0,label:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629",name:"status",value:l.values.status,onChange:l.handleChange,onBlur:l.handleBlur,error:l.touched.status&&Boolean(l.errors.status),helperText:l.touched.status&&l.errors.status,fullWidth:!0,InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{padding:"0.7rem 0rem"}},children:K.map((e=>(0,m.jsx)(z.A,{value:e,children:X(e)},e)))})]})}),(0,m.jsxs)(F.A,{sx:{p:2},children:[(0,m.jsx)(y.A,{variant:"outlined",onClick:a,disabled:o.isPending,size:"small",sx:{color:"#000"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,m.jsx)(y.A,{type:"submit",variant:"contained",disabled:o.isPending||!l.dirty,size:"small",startIcon:o.isPending?(0,m.jsx)(P.A,{size:16,color:"inherit"}):null,children:o.isPending?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b...":"\u062a\u062d\u062f\u064a\u062b ".concat(i.length," \u0639\u0646\u0635\u0631")})]})]})]})};const $=function(e){let{orderItems:t,orderId:n}=e;const[i,o]=(0,r.useState)(new Set),l=(0,D.j)(),d=(0,D.j)(),[c,x]=(0,r.useState)(null),A=i.size,j=A===t.length&&t.length>0;return(0,m.jsxs)(a.A,{children:[t.length>1&&(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,m.jsx)(E.A,{control:(0,m.jsx)(w.A,{checked:j,indeterminate:A>0&&!j,onChange:()=>{i.size===t.length?o(new Set):o(new Set(t.map(((e,t)=>t))))},color:"primary"}),label:(0,m.jsx)(h.A,{variant:"button",fontWeight:"medium",children:j?"\u0625\u0644\u063a\u0627\u0621 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0644":"\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0644"})}),A>1&&(0,m.jsxs)(y.A,{variant:"contained",color:"info",size:"small",startIcon:(0,m.jsx)(R.A,{}),onClick:()=>{t.filter(((e,t)=>i.has(t)));d.onOpen()},sx:{minWidth:120},children:["\u062a\u0639\u062f\u064a\u0644 \u062c\u0645\u0627\u0639\u064a (",A,")"]})]}),(0,m.jsx)(s.Ay,{container:!0,spacing:3,alignItems:"center",children:t.map(((e,n)=>{var r,d,c,A;const j=i.has(n),p=(0,u.wA)(null===e||void 0===e||null===(r=e.tracking)||void 0===r?void 0:r.status);return(0,m.jsx)(s.Ay,{item:!0,xs:12,md:6,p:1,children:(0,m.jsxs)(a.A,{display:"flex",alignItems:"center",sx:{minHeight:"127px",p:2,borderRadius:2,border:j?"2px solid #1976d2":"1px solid #e0e0e0",backgroundColor:j?"#f3f8ff":"transparent",transition:"all 0.2s ease-in-out",cursor:"pointer","&:hover":{borderColor:j?"#1976d2":"#bdbdbd",backgroundColor:j?"#f3f8ff":"#fafafa"}},onClick:()=>t.length>1?(e=>{const t=new Set(i);t.has(e)?t.delete(e):t.add(e),o(t)})(n):void 0,children:[(0,m.jsx)(a.A,{mr:2,children:(0,m.jsx)("img",{src:null===e||void 0===e||null===(d=e.product)||void 0===d?void 0:d.images[0].url,alt:"\u0631\u064a\u0627\u0644",width:70,height:70,crossOrigin:"anonymous",loading:"lazy",style:{borderRadius:"50%"}})}),(0,m.jsx)(a.A,{lineHeight:1,flex:1,children:(0,m.jsxs)(f.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:1,children:[(0,m.jsxs)(f.A,{children:[" ",(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",children:null===e||void 0===e||null===(c=e.product)||void 0===c?void 0:c.nameAr}),(0,m.jsxs)(f.A,{mb:2,sx:{display:"flex",alignItems:"center",gap:0},children:[(0,m.jsxs)(h.A,{variant:"button",color:"text",children:[(0,m.jsx)("span",{style:{fontWeight:500,color:"#000"},children:"\u0627\u0644\u0633\u0639\u0631"})," ",":"]}),(0,m.jsx)(h.A,{variant:"button",color:"text",children:Number(null===e||void 0===e||null===(A=e.product)||void 0===A?void 0:A.price).toFixed(2)}),(0,m.jsx)("img",{src:I.A,alt:"\u0631\u064a\u0627\u0644",width:20,height:20,crossOrigin:"anonymous",loading:"lazy",style:{marginBottom:3}})]})]}),(0,m.jsxs)(f.A,{display:"flex",alignItems:"center",gap:1,flexDirection:"column",mt:1,children:[p,(0,m.jsx)(C.A,{size:"small",onClick:t=>((e,t)=>{t.stopPropagation(),x(e),l.onOpen()})(e,t),sx:{color:"info.main","&:hover":{color:"info.dark"}},children:(0,m.jsx)(R.A,{fontSize:"small"})})]})]})})]})},n)}))}),(0,m.jsx)(q,{open:l.open,onClose:l.onClose,item:c,orderId:n}),(0,m.jsx)(J,{open:d.open,onClose:d.onClose,selectedItems:t.filter(((e,t)=>i.has(t))),setSelectedItems:o,orderId:n})]})};const ee=function(e){var t,n,i,r,s;let{order:o}=e;return Number((null===o||void 0===o||null===(t=o.orderItems)||void 0===t?void 0:t.reduce(((e,t)=>{var n;return e+((null===(n=t.product)||void 0===n?void 0:n.price)||0)}),0))||0).toFixed(2),(0,m.jsxs)(f.A,{sx:{display:"flex",flexDirection:"column"},children:[" ",(0,m.jsx)(a.A,{mb:2,children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",children:"\u0645\u0644\u062e\u0635 \u0627\u0644\u0637\u0644\u0628"})}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mb:.5,children:[(0,m.jsx)(h.A,{variant:"button",fontWeight:"regular",color:"text",children:"\u0633\u0639\u0631 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a:"}),(0,m.jsx)(a.A,{ml:1,children:(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===(n=Number(null===o||void 0===o?void 0:o.subtotal))||void 0===n?void 0:n.toFixed(2)})})]}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mb:.5,children:[(0,m.jsx)(h.A,{variant:"button",fontWeight:"regular",color:"text",children:"\u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644:"}),(0,m.jsx)(a.A,{ml:1,children:(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===(i=Number(null===o||void 0===o?void 0:o.deliveryFee))||void 0===i?void 0:i.toFixed(2)})})]}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mb:.5,children:[(0,m.jsx)(h.A,{variant:"button",fontWeight:"regular",color:"text",children:"\u0627\u0644\u0636\u0631\u0627\u0626\u0628:"}),(0,m.jsx)(a.A,{ml:1,children:(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===(r=Number(null===o||void 0===o?void 0:o.taxAmount))||void 0===r?void 0:r.toFixed(2)})})]}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mb:.5,children:[(0,m.jsx)(h.A,{variant:"button",fontWeight:"regular",color:"text",children:"\u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0631\u0643\u064a\u0628:"}),(0,m.jsx)(a.A,{ml:1,children:(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:null===(s=Number(null===o||void 0===o?void 0:o.installationFee))||void 0===s?void 0:s.toFixed(2)})})]}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",mt:3,children:[(0,m.jsx)(h.A,{variant:"body1",fontWeight:"light",color:"text",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,m.jsx)(a.A,{ml:1,children:(0,m.jsx)(h.A,{variant:"body1",fontWeight:"medium",children:Number(null===o||void 0===o?void 0:o.totalAmount).toFixed(2)})})]})]})};var te=n(413);const ne=function(e){let{customer:t}=e;const[n]=(0,te.lZ)(),{darkMode:i}=n;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(h.A,{variant:"h6",fontWeight:"medium",children:["\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"," "]}),(0,m.jsx)(a.A,{component:"li",display:"flex",justifyContent:"space-between",alignItems:"flex-start",bgColor:"transparent",borderRadius:"lg",p:3,mt:2,children:(0,m.jsxs)(a.A,{width:"100%",display:"flex",flexDirection:"column",lineHeight:1,children:[(0,m.jsx)(a.A,{mb:2,children:(0,m.jsx)(h.A,{variant:"button",fontWeight:"medium",textTransform:"capitalize",children:null===t||void 0===t?void 0:t.fullName})}),(0,m.jsx)(a.A,{mb:1,lineHeight:0,children:(0,m.jsxs)(h.A,{variant:"caption",fontWeight:"regular",color:"text",children:["\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:\xa0\xa0\xa0",(0,m.jsxs)(h.A,{variant:"caption",fontWeight:"medium",children:[(null===t||void 0===t?void 0:t.email)||(null===t||void 0===t?void 0:t.fullName.split(" ").join("").toLowerCase()),"@gmail.com"]})]})}),(0,m.jsx)(a.A,{mb:1,lineHeight:0,children:(0,m.jsxs)(h.A,{variant:"caption",fontWeight:"regular",color:"text",children:["\u0627\u0644\u0631\u0642\u0645:\xa0\xa0\xa0",(0,m.jsx)(h.A,{variant:"caption",fontWeight:"medium",children:(null===t||void 0===t?void 0:t.phoneNumber)||""})]})}),(null===t||void 0===t?void 0:t.address)&&(0,m.jsx)(a.A,{mb:1,lineHeight:0,children:(0,m.jsxs)(h.A,{variant:"caption",fontWeight:"regular",color:"text",children:["\u0627\u0644\u0639\u0646\u0648\u0627\u0646:\xa0\xa0\xa0",(0,m.jsx)(h.A,{variant:"caption",fontWeight:"medium",children:(null===t||void 0===t?void 0:t.address)||""})]})})]})})]})};var ie=n(392),re=n(2159),se=n(4919);const oe=(0,r.createContext)();const le=function(e,t){const{borders:n}=e,{lastItem:i,isDark:r}=t,{borderWidth:s,borderColor:o}=n;return{"&:after":{content:!i&&"''",position:"absolute",top:"2rem",left:"17px",height:"100%",opacity:r?.1:1,borderRight:"".concat(s[2]," solid ").concat(o)}}};const ae=function(e){let{color:t="info",icon:n,title:i,dateTime:s,description:o="",lastItem:l=!1}=e;const d=(0,r.useContext)(oe);return(0,m.jsxs)(a.A,{position:"relative",mb:3,sx:e=>le(e,{lastItem:l,isDark:d}),children:[(0,m.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",bgColor:t,color:"white",width:"2rem",height:"2rem",borderRadius:"50%",position:"absolute",top:"8%",left:"2px",zIndex:2,sx:{fontSize:e=>{let{typography:{size:t}}=e;return t.sm}},children:(0,m.jsx)(se.A,{fontSize:"inherit",children:n})}),(0,m.jsxs)(a.A,{ml:5.75,pt:o?.7:.5,lineHeight:0,maxWidth:"30rem",children:[(0,m.jsx)(h.A,{variant:"button",fontWeight:"medium",color:d?"white":"dark",children:i}),(0,m.jsx)(a.A,{mt:.5,children:(0,m.jsx)(h.A,{variant:"caption",color:d?"secondary":"text",children:s})}),(0,m.jsx)(a.A,{mt:2,mb:1.5,children:o?(0,m.jsx)(h.A,{variant:"button",color:d?"white":"dark",children:o}):null})]})]})};const de=function(e){let{installmentPlan:t}=e;const n=e=>new Intl.NumberFormat("ar",{style:"currency",currency:"SAR",minimumFractionDigits:2}).format(e),i=e=>e?new Intl.DateTimeFormat("ar-eg",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",r=e=>{switch(e){case"paid":return"check_circle";case"overdue":return"error";default:return"schedule"}};return t?null!==t&&void 0!==t&&t.installments&&0!==t.installments.length?(0,m.jsxs)(m.Fragment,{children:[" ",(0,m.jsxs)(a.A,{mb:3,children:[(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",color:"dark",children:"\u062e\u0637\u0629 \u0627\u0644\u0623\u0642\u0633\u0627\u0637"}),(0,m.jsxs)(a.A,{display:"flex",gap:3,flexWrap:"wrap",children:[(0,m.jsxs)(h.A,{variant:"body2",color:"text",children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a:"," ",(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"},children:n(parseFloat(t.totalAmount)||0)})]}),(0,m.jsxs)(h.A,{variant:"body2",color:"text",children:["\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0634\u0647\u0631\u064a:"," ",(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"},children:n(parseFloat(t.monthlyAmount)||0)})]}),(0,m.jsxs)(h.A,{variant:"body2",color:"text",children:["\u0639\u062f\u062f \u0627\u0644\u0623\u0634\u0647\u0631:"," ",(0,m.jsx)("span",{style:{fontWeight:"bold",color:"#000"},children:t.totalMonths||0})]})]})]}),(0,m.jsx)(l.A,{sx:{mb:3}}),(0,m.jsx)(a.A,{children:t.installments.map(((e,s)=>{const o=s===t.installments.length-1,l=(e=>{const t=new Date,n=new Date(e.dueDate);return"PAID"===e.status?{status:"paid",color:"success",text:"\u0645\u062f\u0641\u0648\u0639\u0629"}:"OVERDUE"===e.status||n<t&&"PENDING"===e.status?{status:"overdue",color:"error",text:"\u0645\u062a\u0623\u062e\u0631\u0629"}:"PENDING"===e.status?{status:"pending",color:"warning",text:"\u0645\u0639\u0644\u0642\u0629"}:{status:"upcoming",color:"info",text:"\u0642\u0627\u062f\u0645\u0629"}})(e);return(0,m.jsx)(ae,{color:l.color,icon:r(l.status),title:"\u0627\u0644\u0642\u0633\u0637 ".concat(e.installmentNumber),dateTime:i(e.dueDate),lastItem:o,description:(0,m.jsxs)(a.A,{children:[(0,m.jsxs)(a.A,{display:"flex",alignItems:"center",gap:2,mb:1,children:[(0,m.jsxs)(h.A,{variant:"body2",fontWeight:"medium",children:["\u0627\u0644\u0645\u0628\u0644\u063a: ",n(parseFloat(e.amount))]}),(0,m.jsx)(re.A,{color:l.color,variant:"contained",size:"sm",children:l.text})]}),e.paidAt&&(0,m.jsxs)(a.A,{display:"flex",alignItems:"center",gap:1,children:[(0,m.jsx)(se.A,{fontSize:"small",color:"success",children:"check_circle"}),(0,m.jsxs)(h.A,{variant:"caption",color:"success",children:["\u062a\u0645 \u0627\u0644\u062f\u0641\u0639 \u0641\u064a: ",i(e.paidAt)]})]})]})},e.id)}))}),(0,m.jsxs)(a.A,{mt:3,p:2,bgColor:"grey-100",borderRadius:"md",children:[(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639:"}),(0,m.jsx)(h.A,{variant:"body2",fontWeight:"bold",color:"success",children:n(t.installments.filter((e=>"PAID"===e.status)).reduce(((e,t)=>e+parseFloat(t.amount||0)),0))})]}),(0,m.jsxs)(a.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,m.jsx)(h.A,{variant:"body2",fontWeight:"medium",children:"\u0627\u0644\u0645\u062a\u0628\u0642\u064a:"}),(0,m.jsx)(h.A,{variant:"body2",fontWeight:"bold",color:"warning",children:n(t.installments.filter((e=>"PAID"!==e.status)).reduce(((e,t)=>e+parseFloat(t.amount||0)),0))})]})]})]}):(0,m.jsx)(o.A,{sx:{p:3,textAlign:"center"},children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",color:"text",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0642\u0633\u0627\u0637 \u0645\u062a\u0627\u062d\u0629"})}):(0,m.jsx)(o.A,{sx:{p:3,textAlign:"center"},children:(0,m.jsx)(h.A,{variant:"h6",fontWeight:"medium",color:"text",children:"\u062a\u0645 \u0627\u0644\u062f\u0641\u0639"})})};const ce=function(){const{id:e}=(0,j.g)(),t=(0,j.Zp)(),{data:n,isLoading:r}=(0,p.W)(e),h=null===n||void 0===n?void 0:n.data;return(0,m.jsxs)(d.A,{children:[(0,m.jsx)(c.A,{}),r?(0,m.jsx)(b,{}):(0,m.jsx)(s.Ay,{container:!0,spacing:3,justifyContent:"center",my:3,children:(0,m.jsxs)(s.Ay,{item:!0,xs:12,lg:10,children:[(0,m.jsxs)(f.A,{sx:{display:"flex",alignItems:"center",mb:2},onClick:()=>t("/orders"),children:[" ",(0,m.jsx)(ie.A,{sx:{width:30,height:30,color:"#090E2D",cursor:"pointer"}})]}),(0,m.jsxs)(o.A,{children:[(0,m.jsx)(a.A,{pt:2,px:2,children:(0,m.jsx)(A,{order:h})}),(0,m.jsx)(l.A,{}),(0,m.jsxs)(a.A,{pt:1,pb:3,px:2,children:[(0,m.jsx)(a.A,{mb:3,children:(0,m.jsx)($,{orderItems:null===h||void 0===h?void 0:h.orderItems,orderId:e})}),(0,m.jsx)(l.A,{}),(0,m.jsx)(a.A,{mt:3,children:(0,m.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,m.jsx)(s.Ay,{item:!0,xs:12,md:6,lg:5,children:(0,m.jsx)(de,{installmentPlan:null===h||void 0===h?void 0:h.installmentPlan})}),(0,m.jsx)(s.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,m.jsx)(ne,{customer:(0,i.A)((0,i.A)({},null===h||void 0===h?void 0:h.user),{},{address:null===h||void 0===h?void 0:h.deliveryAddress})})}),(0,m.jsx)(s.Ay,{item:!0,xs:12,lg:3,sx:{mr:"auto"},children:(0,m.jsx)(ee,{order:h})})]})})]})]})]})})]})}},9526:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(4100)}}]);