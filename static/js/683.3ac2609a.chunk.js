"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[683],{3683:(e,n,r)=>{r.r(n),r.d(n,{default:()=>H});var o=r(8157),l=r(881),a=r(9950),s=r(4919),t=r(226),i=r(3464),d=r(33),c=r(8170),u=r(3962),h=r(9925),x=r(9739),m=r(6639),A=r(3939),p=r(9714),j=r(1201),g=r(5441),v=r(1778),C=r(315),f=r(1728);const b=[{scope:C.e.ROLES}];var y=r(4414);const E=p.Ik({key:p.Yj().required("\u0627\u0644\u0643\u0648\u062f \u0645\u0637\u0644\u0648\u0628"),nameEn:p.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),nameAr:p.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628")});function k(e){let{open:n,onClose:r,role:o}=e;const l=(0,A.Wx)({enableReinitialize:!0,initialValues:{key:(null===o||void 0===o?void 0:o.key)||"",nameEn:(null===o||void 0===o?void 0:o.nameEn)||"",nameAr:(null===o||void 0===o?void 0:o.nameAr)||""},validationSchema:E,onSubmit:e=>{p(o.id,e)},validateOnBlur:!0,validateOnChange:!1}),{mutate:a,isPending:s}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,g.jE)();return(0,v.n)({mutationFn:e=>{let{permissionId:n,payload:r}=e;return(0,f.S0)(n,r)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:b}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062f\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}}),p=(e,n)=>{a({permissionId:e,payload:n})};return(0,y.jsxs)(i.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[(0,y.jsx)(d.A,{children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062f\u0648\u0631"}),(0,y.jsxs)("form",{onSubmit:l.handleSubmit,children:[(0,y.jsx)(c.A,{children:(0,y.jsxs)(u.A,{spacing:2,children:[(0,y.jsx)(h.A,{label:"\u0627\u0644\u0643\u0648\u062f (Key)",name:"key",placeholder:"\u0627\u062f\u062e\u0644 \u0627\u0644\u0643\u0648\u062f",value:l.values.key,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.key&&l.errors.key),helperText:l.touched.key&&l.errors.key,fullWidth:!0}),(0,y.jsx)(h.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629",name:"nameAr",placeholder:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",value:l.values.nameAr,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.nameAr&&l.errors.nameAr),helperText:l.touched.nameAr&&l.errors.nameAr,fullWidth:!0}),(0,y.jsx)(h.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629",name:"nameEn",placeholder:"View Products",value:l.values.nameEn,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.nameEn&&l.errors.nameEn),helperText:l.touched.nameEn&&l.errors.nameEn,fullWidth:!0})]})}),(0,y.jsxs)(x.A,{children:[(0,y.jsx)(t.A,{onClick:r,disabled:s,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,y.jsx)(t.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:s,children:s?(0,y.jsx)(m.A,{size:22,sx:{color:"#000"}}):"\u062d\u0641\u0638"})]})]})]})}var S=r(7378),B=r(6491),w=r(2053);const P=[{scope:C.e.ROLES}];function F(e){let{open:n,onClose:r,roleId:o}=e;const{mutate:l,isPending:a}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,g.jE)();return(0,v.n)({mutationFn:e=>{let{roleId:n}=e;return(0,f.EO)(n)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:P}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062f\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}});return(0,y.jsxs)(i.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"xs",children:[(0,y.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,y.jsxs)(B.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:2,borderRadius:"50%",backgroundColor:"#FEF9F9",width:"fit-content"},children:[" ",(0,y.jsx)(s.A,{color:"error",children:"delete"})]})}),(0,y.jsx)(c.A,{sx:{textAlign:"center"},children:(0,y.jsx)(w.A,{children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u062f\u0648\u0631 "})}),(0,y.jsxs)(x.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,y.jsx)(t.A,{onClick:r,disabled:a,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,y.jsx)(t.A,{variant:"contained",sx:{color:"#FFF",backgroundColor:"#F75555","&:hover":{backgroundColor:"#d63f3f"},"&:focus":{outline:"none",backgroundColor:"#d63f3f"},"&:active":{backgroundColor:"#d63f3f",boxShadow:"none"}},disableElevation:!0,onClick:()=>{l({roleId:o})},disabled:a,children:a?(0,y.jsx)(m.A,{size:22,sx:{color:"#000"}}):"\u062d\u0630\u0641"})," "]})]})}const W=[{scope:C.e.ROLES}],I=p.Ik({key:p.Yj().required("\u0627\u0644\u0643\u0648\u062f \u0645\u0637\u0644\u0648\u0628"),nameEn:p.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),nameAr:p.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628")});function R(e){let{open:n,onClose:r}=e;const o=(0,A.Wx)({initialValues:{key:"",nameEn:"",nameAr:""},validationSchema:I,onSubmit:e=>{s(e)},validateOnBlur:!0,validateOnChange:!1}),{mutate:l,isPending:a}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,g.jE)();return(0,v.n)({mutationFn:e=>{let{payload:n}=e;return(0,f.Cm)(n)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:W}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{j.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062f\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{j.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}}),s=e=>{l({payload:e})};return(0,y.jsxs)(i.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[(0,y.jsx)(d.A,{children:"\u0625\u0636\u0627\u0641\u0629 \u062f\u0648\u0631 \u062c\u062f\u064a\u062f"}),(0,y.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,y.jsx)(c.A,{children:(0,y.jsxs)(u.A,{spacing:2,children:[(0,y.jsx)(h.A,{label:"\u0627\u0644\u0643\u0648\u062f (Key)",name:"key",placeholder:"\u0645\u062b\u0627\u0644: products.view",value:o.values.key,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.key&&o.errors.key),helperText:o.touched.key&&o.errors.key,fullWidth:!0}),(0,y.jsx)(h.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629",name:"nameAr",placeholder:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",value:o.values.nameAr,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.nameAr&&o.errors.nameAr),helperText:o.touched.nameAr&&o.errors.nameAr,fullWidth:!0}),(0,y.jsx)(h.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629",name:"nameEn",placeholder:"View Products",value:o.values.nameEn,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.nameEn&&o.errors.nameEn),helperText:o.touched.nameEn&&o.errors.nameEn,fullWidth:!0})]})}),(0,y.jsxs)(x.A,{children:[(0,y.jsx)(t.A,{onClick:r,disabled:a,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,y.jsx)(t.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:a,children:a?(0,y.jsx)(m.A,{size:22,sx:{color:"#000"}}):"\u0625\u0636\u0627\u0641\u0629"})]})]})]})}var T=r(6784),O=r(9609),q=r(6340),z=r(8429);const V=function(){var e,n;const[r,o]=a.useState(null),l=(0,z.Zp)(),i=(0,S.j)(),d=(0,S.j)(),c=(0,S.j)(),{data:u,isLoading:h,isError:x}=(0,O.x)(),m=null!==(e=null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.roles)&&void 0!==e?e:[],A=m.length>0?{columns:[{Header:"\u0627\u0633\u0645 \u0627\u0644\u062f\u0648\u0631",accessor:"name",width:"22%"},{Header:"\u0627\u0644\u0643\u0648\u062f",accessor:"key",width:"16%"},{Header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",width:"14%"}],rows:null===m||void 0===m?void 0:m.map((e=>({id:e.id,name:e.nameAr||e.nameEn,key:e.key,actions:(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,y.jsx)(s.A,{style:{cursor:"pointer"},onClick:()=>(e=>{i.onOpen(),o(e)})(e),children:"edit"}),(0,y.jsx)(s.A,{style:{cursor:"pointer",color:"red"},onClick:()=>(e=>{d.onOpen(),o(e)})(e),children:"delete"}),(0,y.jsx)(s.A,{style:{cursor:"pointer",color:"#379C7C"},onClick:()=>l("/roles/".concat(e.id)),children:"lock"})]})})})))}:{};return h?(0,y.jsx)(q.A,{table:A,rows:6,columns:3}):x?(0,y.jsx)("div",{children:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(T.A,{table:A,isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,canSearch:!0,noEndBorder:!0,canAddButton:!0,addButtonChildren:(0,y.jsx)(t.A,{variant:"contained",sx:{color:"#FFF"},onClick:()=>c.onOpen(),children:"\u0625\u0636\u0627\u0641\u0629 \u062f\u0648\u0631"})}),r&&(0,y.jsx)(k,{open:i.open,onClose:i.onClose,role:r}),r&&(0,y.jsx)(F,{open:d.open,onClose:d.onClose,roleId:null===r||void 0===r?void 0:r.id}),(0,y.jsx)(R,{open:c.open,onClose:c.onClose})]})};const H=function(){return(0,y.jsxs)(o.A,{children:[(0,y.jsx)(l.A,{}),(0,y.jsx)(V,{})]})}},6784:(e,n,r)=>{r.d(n,{A:()=>v});var o=r(9379),l=r(9950),a=r(2043),s=r(5769),t=r(4075),i=r(1320),d=r(9213),c=r(4919),u=r(8102),h=r(2498),x=r(1606),m=r(7825),A=r(9590),p=r(4016),j=r(6491),g=r(4414);const v=function(e){let{entriesPerPage:n={defaultValue:10,entries:[5,10,15,20,25]},canSearch:r=!1,showTotalEntries:v=!0,table:C,pagination:f={variant:"gradient",color:"info"},isSorted:b=!0,noEndBorder:y=!1,isRTL:E=!0,addButtonChildren:k,canAddButton:S=!1}=e;const B=n.defaultValue?n.defaultValue:10,w=(n.entries&&n.entries.map((e=>e.toString())),(0,l.useMemo)((()=>C.columns),[C])),P=(0,l.useMemo)((()=>C.rows),[C]),F=(0,a.useTable)({columns:w,data:P,initialState:{pageIndex:0}},a.useGlobalFilter,a.useSortBy,a.usePagination),{getTableProps:W,getTableBodyProps:I,headerGroups:R,prepareRow:T,rows:O,page:q,pageOptions:z,canPreviousPage:V,canNextPage:H,gotoPage:Y,nextPage:_,previousPage:K,setPageSize:L,setGlobalFilter:G,state:{pageIndex:D,pageSize:N,globalFilter:Q}}=F;(0,l.useEffect)((()=>L(B||10)),[B]);const M=z.map((e=>(0,g.jsx)(m.A,{item:!0,onClick:()=>Y(Number(e)),active:D===e,children:e+1},e))),Z=z.map((e=>e+1)),[J,U]=(0,l.useState)(Q),X=(0,a.useAsyncDebounce)((e=>{G(e||void 0)}),100),$=e=>{let n;return n=b&&e.isSorted?e.isSortedDesc?"desc":"asce":!!b&&"none",n},ee=0===D?D+1:D*N+1;let ne;return ne=0===D?N:D===z.length-1?O.length:N*(D+1),(0,g.jsxs)(i.A,{sx:{boxShadow:"none",direction:"rtl"},dir:E?"rtl":"ltr",children:[S||r?(0,g.jsxs)(u.A,{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,children:[S&&(0,g.jsx)(j.A,{children:k}),r&&(0,g.jsx)(u.A,{width:"12rem",mr:"auto",children:(0,g.jsx)(x.A,{placeholder:"Search...",value:J,size:"small",fullWidth:!0,onChange:e=>{let{currentTarget:n}=e;U(J),X(n.value)}})})]}):null,(0,g.jsxs)(s.A,(0,o.A)((0,o.A)({sx:{direction:"ltr"}},W()),{},{children:[(0,g.jsx)(u.A,{component:"thead",children:R.map(((e,n)=>(0,g.jsx)(d.A,(0,o.A)((0,o.A)({},e.getHeaderGroupProps()),{},{children:e.headers.map(((e,n)=>(0,g.jsx)(A.A,(0,o.A)((0,o.A)({},e.getHeaderProps(b&&e.getSortByToggleProps())),{},{width:e.width?e.width:"auto",align:e.align?e.align:"left",sorted:$(e),children:e.render("Header")}),n)))}),n)))}),(0,g.jsx)(t.A,(0,o.A)((0,o.A)({},I()),{},{children:q.map(((e,n)=>(T(e),(0,g.jsx)(d.A,(0,o.A)((0,o.A)({},e.getRowProps()),{},{children:e.cells.map(((e,r)=>(0,g.jsx)(p.A,(0,o.A)((0,o.A)({noBorder:y&&O.length-1===n,align:e.column.align?e.column.align:"left"},e.getCellProps()),{},{children:e.render("Cell")}),r)))}),n))))}))]})),(0,g.jsxs)(u.A,{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},p:v||1!==z.length?3:0,children:[v&&(0,g.jsx)(u.A,{mb:{xs:3,sm:0},children:(0,g.jsxs)(h.A,{variant:"button",color:"secondary",fontWeight:"regular",children:[ee," - ",ne," of ",O.length]})}),z.length>1&&(0,g.jsxs)(m.A,{variant:f.variant?f.variant:"gradient",color:f.color?f.color:"info",children:[V&&(0,g.jsx)(m.A,{item:!0,onClick:()=>K(),children:(0,g.jsx)(c.A,{sx:{fontWeight:"bold"},children:"chevron_right"})}),M.length>6?(0,g.jsx)(u.A,{width:"5rem",mx:1,children:(0,g.jsx)(x.A,{inputProps:{type:"number",min:1,max:Z.length},value:Z[D],onChange:e=>{let{target:n}=e;return Y(Number(n.value-1))}})}):M,H&&(0,g.jsx)(m.A,{item:!0,onClick:()=>_(),children:(0,g.jsx)(c.A,{sx:{fontWeight:"bold"},children:"chevron_left"})})]})]})]})}}}]);