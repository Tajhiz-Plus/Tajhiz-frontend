"use strict";(self.webpackChunktajhiz_dashboard_react=self.webpackChunktajhiz_dashboard_react||[]).push([[29],{2029:(e,n,r)=>{r.r(n),r.d(n,{default:()=>z});var o=r(8157),l=r(881),a=r(9950),s=r(4919),t=r(226),i=r(2982),d=r(3464),c=r(33),u=r(8170),h=r(3962),m=r(9925),x=r(9739),p=r(6639),A=r(3939),g=r(9714),j=r(5441),v=r(1778),b=r(315),C=r(6965);const y=[{scope:b.e.PERMISSIONS}];var f=r(1201),S=r(4414);const E=g.Ik({key:g.Yj().required("\u0627\u0644\u0643\u0648\u062f \u0645\u0637\u0644\u0648\u0628"),nameEn:g.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),nameAr:g.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),module:g.Yj().required("\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u062f\u064a\u0648\u0644 \u0645\u0637\u0644\u0648\u0628")});function k(e){let{open:n,onClose:r,permission:o}=e;const l=(0,A.Wx)({enableReinitialize:!0,initialValues:{key:(null===o||void 0===o?void 0:o.key)||"",nameEn:(null===o||void 0===o?void 0:o.nameEn)||"",nameAr:(null===o||void 0===o?void 0:o.nameAr)||"",module:(null===o||void 0===o?void 0:o.module)||""},validationSchema:E,onSubmit:e=>{i(o.id,e)},validateOnBlur:!0,validateOnChange:!1}),{mutate:a,isPending:s}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,j.jE)();return(0,v.n)({mutationFn:e=>{let{permissionId:n,payload:r}=e;return(0,C.LA)(n,r)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:y}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{f.oR.success("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{f.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}}),i=(e,n)=>{a({permissionId:e,payload:n})};return(0,S.jsxs)(d.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[(0,S.jsx)(c.A,{children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,S.jsxs)("form",{onSubmit:l.handleSubmit,children:[(0,S.jsx)(u.A,{children:(0,S.jsxs)(h.A,{spacing:2,children:[(0,S.jsx)(m.A,{label:"\u0627\u0644\u0643\u0648\u062f (Key)",name:"key",placeholder:"\u0645\u062b\u0627\u0644: products.view",value:l.values.key,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.key&&l.errors.key),helperText:l.touched.key&&l.errors.key,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629",name:"nameAr",placeholder:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",value:l.values.nameAr,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.nameAr&&l.errors.nameAr),helperText:l.touched.nameAr&&l.errors.nameAr,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629",name:"nameEn",placeholder:"View Products",value:l.values.nameEn,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.nameEn&&l.errors.nameEn),helperText:l.touched.nameEn&&l.errors.nameEn,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0645\u0648\u062f\u064a\u0648\u0644",name:"module",placeholder:"products",value:l.values.module,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.module&&l.errors.module),helperText:l.touched.module&&l.errors.module,fullWidth:!0})]})}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(t.A,{onClick:r,disabled:s,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)(t.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:s,children:s?(0,S.jsx)(p.A,{size:22,sx:{color:"#FFF"}}):"\u062d\u0641\u0638"})]})]})]})}var B=r(7378),F=r(2053);const P=[{scope:b.e.PERMISSIONS}];function w(e){let{open:n,onClose:r,permissionId:o}=e;const{mutate:l,isPending:a}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,j.jE)();return(0,v.n)({mutationFn:e=>{let{permissionId:n}=e;return(0,C.pK)(n)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:P}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{f.oR.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{f.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}});return(0,S.jsxs)(d.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"xs",children:[(0,S.jsx)(c.A,{sx:{textAlign:"center"},children:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062d\u0630\u0641"}),(0,S.jsx)(u.A,{sx:{textAlign:"center"},children:(0,S.jsx)(F.A,{children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 "})}),(0,S.jsxs)(x.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,S.jsx)(t.A,{onClick:r,disabled:a,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)(t.A,{variant:"contained",sx:{color:"#FFF",backgroundColor:"#F75555","&:hover":{backgroundColor:"#d63f3f"},"&:focus":{outline:"none",backgroundColor:"#d63f3f"},"&:active":{backgroundColor:"#d63f3f",boxShadow:"none"}},disableElevation:!0,onClick:()=>{l({permissionId:o})},disabled:a,children:a?(0,S.jsx)(p.A,{size:22,sx:{color:"#FFF"}}):"\u062d\u0630\u0641"})," "]})]})}const I=[{scope:b.e.PERMISSIONS}],W=g.Ik({key:g.Yj().required("\u0627\u0644\u0643\u0648\u062f \u0645\u0637\u0644\u0648\u0628"),nameEn:g.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),nameAr:g.Yj().required("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0645\u0637\u0644\u0648\u0628"),module:g.Yj().required("\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u062f\u064a\u0648\u0644 \u0645\u0637\u0644\u0648\u0628")});function T(e){let{open:n,onClose:r}=e;const o=(0,A.Wx)({initialValues:{key:"",nameEn:"",nameAr:"",module:""},validationSchema:W,onSubmit:e=>{s(e)},validateOnBlur:!0,validateOnChange:!1}),{mutate:l,isPending:a}=(e=>{let{onSuccess:n,onError:r}=e;const o=(0,j.jE)();return(0,v.n)({mutationFn:e=>{let{payload:n}=e;return(0,C.Ft)(n)},onSuccess:(e,r,l)=>{o.invalidateQueries({queryKey:I}),null===n||void 0===n||n(e,r,l)},onError:()=>{r&&r()}})})({onSuccess:()=>{f.oR.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),r()},onError:e=>{f.oR.error("\u062d\u062f\u062b \u062e\u0637\u0623: ".concat(e.message))}}),s=e=>{l({payload:e})};return(0,S.jsxs)(d.A,{open:n,onClose:r,fullWidth:!0,maxWidth:"sm",children:[(0,S.jsx)(c.A,{children:"\u0625\u0636\u0627\u0641\u0629 \u0635\u0644\u0627\u062d\u064a\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,S.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,S.jsx)(u.A,{children:(0,S.jsxs)(h.A,{spacing:2,children:[(0,S.jsx)(m.A,{label:"\u0627\u0644\u0643\u0648\u062f (Key)",name:"key",placeholder:"\u0645\u062b\u0627\u0644: products.view",value:o.values.key,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.key&&o.errors.key),helperText:o.touched.key&&o.errors.key,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629",name:"nameAr",placeholder:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",value:o.values.nameAr,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.nameAr&&o.errors.nameAr),helperText:o.touched.nameAr&&o.errors.nameAr,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629",name:"nameEn",placeholder:"View Products",value:o.values.nameEn,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.nameEn&&o.errors.nameEn),helperText:o.touched.nameEn&&o.errors.nameEn,fullWidth:!0}),(0,S.jsx)(m.A,{label:"\u0627\u0644\u0645\u0648\u062f\u064a\u0648\u0644",name:"module",placeholder:"products",value:o.values.module,onChange:o.handleChange,onBlur:o.handleBlur,error:Boolean(o.touched.module&&o.errors.module),helperText:o.touched.module&&o.errors.module,fullWidth:!0})]})}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(t.A,{onClick:r,disabled:a,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)(t.A,{type:"submit",variant:"contained",sx:{color:"#FFF"},disableElevation:!0,disabled:a,children:a?(0,S.jsx)(p.A,{size:22,sx:{color:"#FFF"}}):"\u0625\u0636\u0627\u0641\u0629"})]})]})]})}var R=r(6784),q=r(1443);const O=function(){var e,n;const[r,o]=a.useState(null),{data:l,isLoading:d,isError:c}=(0,i.G)(),u=null!==(e=null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.permissions)&&void 0!==e?e:[],h=(0,B.j)(),m=(0,B.j)(),x=(0,B.j)(),p=u.length>0?{columns:[{Header:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",accessor:"name",width:"22%"},{Header:"\u0627\u0644\u0643\u0648\u062f",accessor:"key",width:"16%"},{Header:"\u0627\u0644\u0645\u0648\u062f\u064a\u0648\u0644",accessor:"module",width:"14%"},{Header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",width:"14%"}],rows:null===u||void 0===u?void 0:u.map((e=>({id:e.id,name:e.nameAr||e.nameEn,key:e.key,module:e.module,actions:(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,S.jsx)(s.A,{style:{cursor:"pointer"},onClick:()=>(e=>{h.onOpen(),o(e)})(e),children:"edit"}),(0,S.jsx)(s.A,{style:{cursor:"pointer",color:"red"},onClick:()=>(e=>{m.onOpen(),o(e)})(e),children:"delete"})]})})})))}:{};return d?(0,S.jsx)(q.A,{table:p}):c?(0,S.jsx)("div",{children:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}):(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsx)(R.A,{table:p,isSorted:!1,entriesPerPage:!1,showTotalEntries:!1,canSearch:!0,noEndBorder:!0,canAddButton:!0,addButtonChildren:(0,S.jsx)(t.A,{variant:"contained",sx:{color:"#FFF"},onClick:()=>x.onOpen(),children:"\u0625\u0636\u0627\u0641\u0629 \u0635\u0644\u0627\u062d\u064a\u0629"})}),r&&(0,S.jsx)(k,{open:h.open,onClose:h.onClose,permission:r}),r&&(0,S.jsx)(w,{open:m.open,onClose:m.onClose,permissionId:null===r||void 0===r?void 0:r.id}),(0,S.jsx)(T,{open:x.open,onClose:x.onClose})]})};const z=function(){return(0,S.jsxs)(o.A,{children:[(0,S.jsx)(l.A,{}),(0,S.jsx)(O,{})]})}},2982:(e,n,r)=>{r.d(n,{G:()=>t});var o=r(6546),l=r(315),a=r(6965);const s=[{scope:l.e.PERMISSIONS}],t=()=>(0,o.I)({queryKey:s,queryFn:a.VE})},6784:(e,n,r)=>{r.d(n,{A:()=>v});var o=r(9379),l=r(9950),a=r(2043),s=r(5769),t=r(4075),i=r(1320),d=r(9213),c=r(4919),u=r(8102),h=r(2498),m=r(1606),x=r(7825),p=r(9590),A=r(4016),g=r(6491),j=r(4414);const v=function(e){let{entriesPerPage:n={defaultValue:10,entries:[5,10,15,20,25]},canSearch:r=!1,showTotalEntries:v=!0,table:b,pagination:C={variant:"gradient",color:"info"},isSorted:y=!0,noEndBorder:f=!1,isRTL:S=!0,addButtonChildren:E,canAddButton:k=!1}=e;const B=n.defaultValue?n.defaultValue:10,F=(n.entries&&n.entries.map((e=>e.toString())),(0,l.useMemo)((()=>b.columns),[b])),P=(0,l.useMemo)((()=>b.rows),[b]),w=(0,a.useTable)({columns:F,data:P,initialState:{pageIndex:0}},a.useGlobalFilter,a.useSortBy,a.usePagination),{getTableProps:I,getTableBodyProps:W,headerGroups:T,prepareRow:R,rows:q,page:O,pageOptions:z,canPreviousPage:V,canNextPage:K,gotoPage:Y,nextPage:H,previousPage:N,setPageSize:G,setGlobalFilter:M,state:{pageIndex:_,pageSize:L,globalFilter:D}}=w;(0,l.useEffect)((()=>G(B||10)),[B]);const Q=z.map((e=>(0,j.jsx)(x.A,{item:!0,onClick:()=>Y(Number(e)),active:_===e,children:e+1},e))),J=z.map((e=>e+1)),[U,X]=(0,l.useState)(D),Z=(0,a.useAsyncDebounce)((e=>{M(e||void 0)}),100),$=e=>{let n;return n=y&&e.isSorted?e.isSortedDesc?"desc":"asce":!!y&&"none",n},ee=0===_?_+1:_*L+1;let ne;return ne=0===_?L:_===z.length-1?q.length:L*(_+1),(0,j.jsxs)(i.A,{sx:{boxShadow:"none",direction:"rtl"},dir:S?"rtl":"ltr",children:[k||r?(0,j.jsxs)(u.A,{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,children:[k&&(0,j.jsx)(g.A,{children:E}),r&&(0,j.jsx)(u.A,{width:"12rem",mr:"auto",children:(0,j.jsx)(m.A,{placeholder:"Search...",value:U,size:"small",fullWidth:!0,onChange:e=>{let{currentTarget:n}=e;X(U),Z(n.value)}})})]}):null,(0,j.jsxs)(s.A,(0,o.A)((0,o.A)({sx:{direction:"ltr"}},I()),{},{children:[(0,j.jsx)(u.A,{component:"thead",children:T.map(((e,n)=>(0,j.jsx)(d.A,(0,o.A)((0,o.A)({},e.getHeaderGroupProps()),{},{children:e.headers.map(((e,n)=>(0,j.jsx)(p.A,(0,o.A)((0,o.A)({},e.getHeaderProps(y&&e.getSortByToggleProps())),{},{width:e.width?e.width:"auto",align:e.align?e.align:"left",sorted:$(e),children:e.render("Header")}),n)))}),n)))}),(0,j.jsx)(t.A,(0,o.A)((0,o.A)({},W()),{},{children:O.map(((e,n)=>(R(e),(0,j.jsx)(d.A,(0,o.A)((0,o.A)({},e.getRowProps()),{},{children:e.cells.map(((e,r)=>(0,j.jsx)(A.A,(0,o.A)((0,o.A)({noBorder:f&&q.length-1===n,align:e.column.align?e.column.align:"left"},e.getCellProps()),{},{children:e.render("Cell")}),r)))}),n))))}))]})),(0,j.jsxs)(u.A,{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},p:v||1!==z.length?3:0,children:[v&&(0,j.jsx)(u.A,{mb:{xs:3,sm:0},children:(0,j.jsxs)(h.A,{variant:"button",color:"secondary",fontWeight:"regular",children:[ee," - ",ne," of ",q.length]})}),z.length>1&&(0,j.jsxs)(x.A,{variant:C.variant?C.variant:"gradient",color:C.color?C.color:"info",children:[V&&(0,j.jsx)(x.A,{item:!0,onClick:()=>N(),children:(0,j.jsx)(c.A,{sx:{fontWeight:"bold"},children:"chevron_right"})}),Q.length>6?(0,j.jsx)(u.A,{width:"5rem",mx:1,children:(0,j.jsx)(m.A,{inputProps:{type:"number",min:1,max:J.length},value:J[_],onChange:e=>{let{target:n}=e;return Y(Number(n.value-1))}})}):Q,K&&(0,j.jsx)(x.A,{item:!0,onClick:()=>H(),children:(0,j.jsx)(c.A,{sx:{fontWeight:"bold"},children:"chevron_left"})})]})]})]})}},6965:(e,n,r)=>{r.d(n,{Ft:()=>s,LA:()=>a,VE:()=>l,pK:()=>t});var o=r(9591);const l=async()=>(await o.A.get("/api/v1/permissions")).data,a=(e,n)=>o.A.put("/api/v1/permissions/".concat(e),n).then((e=>e.data)),s=e=>o.A.post("/api/v1/permissions",e).then((e=>e.data)),t=e=>o.A.delete("/api/v1/permissions/".concat(e)).then((e=>e.data))}}]);